<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  A&amp;D of Network Security - Lab 3
  #


  tags: Practicum of A&amp;D of NS NTU
  #


  Background
  #

Network setting type in virtual box


  Ping two machine in internal mode
  #

:::spoiler Detailed Process


Clone another VM



Setting Network Configuration

Setting 2 VMs&rsquo; network config as above.
Note that, must check MAC address is different, promiscuous mode is Allow All and the adapter is the same."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/security/course/ntu-padns/ad-of-network-security---lab-3/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="A&D of Network Security - Lab 3"><meta property="og:description" content="A&amp;D of Network Security - Lab 3 # tags: Practicum of A&amp;D of NS NTU # Background # Network setting type in virtual box Ping two machine in internal mode # :::spoiler Detailed Process
Clone another VM Setting Network Configuration Setting 2 VMsâ€™ network config as above. Note that, must check MAC address is different, promiscuous mode is Allow All and the adapter is the same."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="security"><meta property="article:tag" content="NTU"><meta property="article:tag" content="NTU_PADNS"><title>A&amp;D of Network Security - Lab 3 | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/security/course/ntu-padns/ad-of-network-security---lab-3/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>A&amp;D of Network Security - Lab 3</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#background>Background</a></li><li><a href=#ping-two-machine-in-internal-mode>Ping two machine in internal mode</a></li><li><a href=#test-communication-between-bridged-vms-on-different-hosts>Test Communication between bridged VMs on Different Hosts</a></li><li><a href=#reconstruct-arp-cache-by-iteratively-ping-all-subnet-ip-addresses>Reconstruct ARP cache by iteratively PING all subnet IP addresses</a><ul><li><a href=#note>Note</a></li><li><a href=#source-code>Source Code</a></li><li><a href=#detailed-process>Detailed Process</a></li></ul></li><li><a href=#testing-communication-between-vms-on-different-hosts-using-nat>Testing Communication between VMs on Different Hosts using NAT</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=ad-of-network-security---lab-3>A&amp;D of Network Security - Lab 3
<a class=anchor href=#ad-of-network-security---lab-3>#</a></h1><h6 id=tags-practicum-of-ad-of-ns-ntu>tags: <code>Practicum of A&amp;D of NS</code> <code>NTU</code>
<a class=anchor href=#tags-practicum-of-ad-of-ns-ntu>#</a></h6><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><p>Network setting type in virtual box
<img src=https://i.imgur.com/g2J83Xg.png alt></p><h2 id=ping-two-machine-in-internal-mode>Ping two machine in internal mode
<a class=anchor href=#ping-two-machine-in-internal-mode>#</a></h2><p>:::spoiler Detailed Process</p><ol><li><p>Clone another VM
<img src=https://i.imgur.com/vsI7lWa.png alt></p></li><li><p>Setting Network Configuration
<img src=https://i.imgur.com/OqZ9Owm.png alt>
Setting 2 VMs&rsquo; network config as above.
<strong>Note that</strong>, must check MAC address is different, promiscuous mode is <code>Allow All</code> and the adapter is the same.</p></li><li><p>Check ifconfig
<img src=https://i.imgur.com/91Ab7Cv.png alt></p><p><img src=https://i.imgur.com/kyutuue.png alt></p></li><li><p>Ping each other
<img src=https://i.imgur.com/BWKJoNX.png alt></p><p><img src=https://i.imgur.com/TjgV49I.png alt>
:::</p></li></ol><h2 id=test-communication-between-bridged-vms-on-different-hosts>Test Communication between bridged VMs on Different Hosts
<a class=anchor href=#test-communication-between-bridged-vms-on-different-hosts>#</a></h2><p>:::spoiler Detailed Process</p><ol><li><p>Setting Bridged Adapter of each VM
<img src=https://i.imgur.com/yhRpgtB.png alt>
<strong>Note that</strong>, the adapter must be the same.</p></li><li><p>Check ifconfig
<img src=https://i.imgur.com/N518AnH.png alt></p><p><img src=https://i.imgur.com/Aglx8eC.png alt>
It should be the same of sub-ip as your true machine
<img src=https://i.imgur.com/VVDmB30.png alt></p></li><li><p>Ping
<img src=https://i.imgur.com/mKQyTNe.png alt>
:::</p></li></ol><h2 id=reconstruct-arp-cache-by-iteratively-ping-all-subnet-ip-addresses>Reconstruct ARP cache by iteratively PING all subnet IP addresses
<a class=anchor href=#reconstruct-arp-cache-by-iteratively-ping-all-subnet-ip-addresses>#</a></h2><p>Objective: scanning all the machine in the same LAN</p><h3 id=note>Note
<a class=anchor href=#note>#</a></h3><p>DO NOT EXECUTE IN DORM&mldr; YOU&rsquo;LL BE BANNED&mldr;</p><h3 id=source-code>Source Code
<a class=anchor href=#source-code>#</a></h3><pre tabindex=0><code class="language-bash=" data-lang="bash=">#!/bin/bash

# ping all ip addresses in the local network
for ip in 192.168.0.{1..254}; do
	# delete old arp records
	sudo arp -d $ip &gt; /dev/null 2&gt;&amp;1
	# get new arp info by ping
	ping -c 5 $ip &gt; /dev/null 2&gt;&amp;1 &amp;
done

# wait for all ping processes to finish
wait

# show scan results (arp table)
arp -n | grep -v incomplete
</code></pre><h3 id=detailed-process>Detailed Process
<a class=anchor href=#detailed-process>#</a></h3><p>:::spoiler Detailed Process</p><ol><li><p>Setting to Host-Only Adapter
<img src=https://i.imgur.com/GFJ1uBY.png alt></p></li><li><p>Check ifconfig
It should be the same as your real machine
<img src=https://i.imgur.com/w5y4LvM.png alt></p><p><img src=https://i.imgur.com/Mhrs1sl.png alt></p><p><img src=https://i.imgur.com/qPj9gry.png alt></p></li><li><p>Setting the code</p><pre tabindex=0><code class="language-bash=" data-lang="bash=">$ sudo dos2unix arpscan.sh
$ sudo chmod 777 arpscan.sh
$ vim arpscan.sh
# modify the sub-ip as the same as your real machine, i.e. 192.168.56.{1..254}
$ sudo bash arpscan.sh
</code></pre><p><img src=https://i.imgur.com/6IJNeYb.png alt>
:::</p></li></ol><h2 id=testing-communication-between-vms-on-different-hosts-using-nat>Testing Communication between VMs on Different Hosts using NAT
<a class=anchor href=#testing-communication-between-vms-on-different-hosts-using-nat>#</a></h2><p>Objective: Find another physical computer and open web service on each PC then use port forwarding to connect the web service to each other.</p><p>:::spoiler Detailed Process</p><ol><li><p>Find another physical computer and connect your own network</p></li><li><p>Set to NAT mode
<img src=https://i.imgur.com/S0DlK7c.png alt></p></li><li><p>Check your physical computer and VM&rsquo;s ip
<img src=https://i.imgur.com/TXTh6SE.png alt></p><p><img src=https://i.imgur.com/g3eoBft.png alt></p></li><li><p>Turn off VM and set port forwarding
<img src=https://i.imgur.com/bZA3dYz.png alt></p></li><li><p>Open your web service</p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ sudo service apache2 start
</code></pre><p>Then test if the service is open or not in local host
<img src=https://i.imgur.com/qeRdYEw.png alt="reference link"></p></li><li><p>Start to let somebody else to query your service
<img src=https://i.imgur.com/GHH2pdr.png alt>
OR&mldr;
You can edit the content of <code>index.html</code> and the result is as below.</p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ cd /var/www/html
$ sudo rm index.html
$ sudo touch index.html
$ sudo vim index.html
# Just write `It works on VM1!!!` and saved it
</code></pre><p><img src=https://i.imgur.com/qsa8cuM.png alt>
:::</p></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#background>Background</a></li><li><a href=#ping-two-machine-in-internal-mode>Ping two machine in internal mode</a></li><li><a href=#test-communication-between-bridged-vms-on-different-hosts>Test Communication between bridged VMs on Different Hosts</a></li><li><a href=#reconstruct-arp-cache-by-iteratively-ping-all-subnet-ip-addresses>Reconstruct ARP cache by iteratively PING all subnet IP addresses</a><ul><li><a href=#note>Note</a></li><li><a href=#source-code>Source Code</a></li><li><a href=#detailed-process>Detailed Process</a></li></ul></li><li><a href=#testing-communication-between-vms-on-different-hosts-using-nat>Testing Communication between VMs on Different Hosts using NAT</a></li></ul></nav></div></aside></main></body></html>