<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  PicoCTF - Operation Oni
  #


  Background
  #

How to View Your SSH Keys in Linux, macOS and Windows
ISO和IMG有哪些區別


  ISO和IMG的區別
  #

ISO和IMG都是操作系統鏡像文件的擴展名，它們的主要區別在以下幾個方面：

來源不同
ISO文件通常來自光盤鏡像，例如Windows安裝光盤的ISO鏡像文件。而IMG文件可以來自多種渠道，例如從移動設備制造商下載的Android操作系統鏡像文件，或者是從虛擬機軟件中制作的虛擬機磁盤鏡像文件。
文件格式不同
ISO文件使用ISO 9660標準格式，而IMG文件可以使用多種格式，例如RAW、VMDK、VDI等。
兼容性不同
ISO文件在各種操作系統和軟件中都有良好的兼容性，而IMG文件在一些操作系統或軟件中可能存在兼容性問題。
使用範圍不同
ISO文件主要用於制作光盤或者USB啟動盤，用於安裝操作系統或者救援系統等。而IMG文件主要用於移動設備或者虛擬機等環境下的操作系統安裝或備份。
總之，ISO和IMG都是操作系統鏡像文件的擴展名，雖然它們在一些方面有類似之處，但在來源、文件格式、兼容性和使用範圍等方面存在差異，應根據具體的需求來選擇使用哪種格式。


  Description
  #

Download this disk image, find the key and log into the remote machine. Note: if you are using the webshell, download and extract the disk image into /tmp not your home directory."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/security/practice/picoctf/misc/disk/picoctf---operation-oni/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="PicoCTF - Operation Oni"><meta property="og:description" content="PicoCTF - Operation Oni # Background # How to View Your SSH Keys in Linux, macOS and Windows
ISO和IMG有哪些區別
ISO和IMG的區別 # ISO和IMG都是操作系統鏡像文件的擴展名，它們的主要區別在以下幾個方面：
來源不同 ISO文件通常來自光盤鏡像，例如Windows安裝光盤的ISO鏡像文件。而IMG文件可以來自多種渠道，例如從移動設備制造商下載的Android操作系統鏡像文件，或者是從虛擬機軟件中制作的虛擬機磁盤鏡像文件。 文件格式不同 ISO文件使用ISO 9660標準格式，而IMG文件可以使用多種格式，例如RAW、VMDK、VDI等。 兼容性不同 ISO文件在各種操作系統和軟件中都有良好的兼容性，而IMG文件在一些操作系統或軟件中可能存在兼容性問題。 使用範圍不同 ISO文件主要用於制作光盤或者USB啟動盤，用於安裝操作系統或者救援系統等。而IMG文件主要用於移動設備或者虛擬機等環境下的操作系統安裝或備份。 總之，ISO和IMG都是操作系統鏡像文件的擴展名，雖然它們在一些方面有類似之處，但在來源、文件格式、兼容性和使用範圍等方面存在差異，應根據具體的需求來選擇使用哪種格式。 Description # Download this disk image, find the key and log into the remote machine. Note: if you are using the webshell, download and extract the disk image into /tmp not your home directory."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="security"><meta property="article:tag" content="PicoCTF"><meta property="article:tag" content="CTF"><meta property="article:tag" content="Misc"><title>PicoCTF - Operation Oni | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/security/practice/picoctf/misc/disk/picoctf---operation-oni/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>PicoCTF - Operation Oni</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#background>Background</a><ul><li><a href=#iso和img的區別>ISO和IMG的區別</a></li></ul></li><li><a href=#description>Description</a></li><li><a href=#recon>Recon</a></li><li><a href=#exploit>Exploit</a></li><li><a href=#reference>Reference</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=picoctf---operation-oni>PicoCTF - Operation Oni
<a class=anchor href=#picoctf---operation-oni>#</a></h1><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><p><a href=https://www.techrepublic.com/article/how-to-view-your-ssh-keys-in-linux-macos-and-windows/>How to View Your SSH Keys in Linux, macOS and Windows</a></p><p><a href=https://docs.pingcode.com/ask/16621.html>ISO和IMG有哪些區別</a></p><blockquote><h3 id=iso和img的區別>ISO和IMG的區別
<a class=anchor href=#iso%e5%92%8cimg%e7%9a%84%e5%8d%80%e5%88%a5>#</a></h3><p>ISO和IMG都是操作系統鏡像文件的擴展名，它們的主要區別在以下幾個方面：</p><ol><li>來源不同
ISO文件通常來自光盤鏡像，例如Windows安裝光盤的ISO鏡像文件。而IMG文件可以來自多種渠道，例如從移動設備制造商下載的Android操作系統鏡像文件，或者是從虛擬機軟件中制作的虛擬機磁盤鏡像文件。</li><li>文件格式不同
ISO文件使用ISO 9660標準格式，而IMG文件可以使用多種格式，例如RAW、VMDK、VDI等。</li><li>兼容性不同
ISO文件在各種操作系統和軟件中都有良好的兼容性，而IMG文件在一些操作系統或軟件中可能存在兼容性問題。</li><li>使用範圍不同
ISO文件主要用於制作光盤或者USB啟動盤，用於安裝操作系統或者救援系統等。而IMG文件主要用於移動設備或者虛擬機等環境下的操作系統安裝或備份。
總之，ISO和IMG都是操作系統鏡像文件的擴展名，雖然它們在一些方面有類似之處，但在來源、文件格式、兼容性和使用範圍等方面存在差異，應根據具體的需求來選擇使用哪種格式。</li></ol></blockquote><h2 id=description>Description
<a class=anchor href=#description>#</a></h2><p>Download this disk image, find the key and log into the remote machine. Note: if you are using the webshell, download and extract the disk image into /tmp not your home directory.</p><ul><li>Download disk image</li><li>Remote machine: <code>ssh -i key_file -p 59801 ctf-player@saturn.picoctf.net</code></li></ul><h2 id=recon>Recon
<a class=anchor href=#recon>#</a></h2><p>這一題和DF有關，主要就是分析拿到的img file，可以用Autopsy之類的分析軟體</p><ol><li><p>ssh參數
先看launch instance之後出現的連線command，ssh帶有<code>-i</code>的參數，根據tldr的常用說明，代表需要給他一個private key file，這也是description中有提到的部分</p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ tldr ssh
...
  - Connect to a remote server using a specific port:
    ssh username@remote_host -p 2222
...
</code></pre></li><li><p>Using Autopsy
使用Autopsy分析img file，會面臨到ssh private key在哪裡的問題，根據<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>的說明通常會放在<code>~/.ssh/</code>或是<code>/root/.ssh/</code>的folder中，所以我們就可以往這個方向找看看
<img src=https://hackmd.io/_uploads/S1m4W6R1p.png alt>
果不其然，的確有一個pub檔案和private key file，直接export出這個檔案，然後夾帶進command就可以了</p></li><li><p>Error
過程中可能會遇到<code>Permission Too Open</code>這個error，原因可以看<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>或是看Almond的WP<sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ ssh -i ssh-private-key -p 59801 ctf-player@saturn.picoctf.net
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Permissions 0777 for &#39;ssh-private-key&#39; are too open.
It is required that your private key files are NOT accessible by others.
This private key will be ignored.
Load key &#34;ssh-private-key&#34;: bad permissions
ctf-player@saturn.picoctf.net&#39;s password:
</code></pre><p>簡單來說就是ssh-private-key這個檔案的權限太多了，因為我是直接export到windows的主機，所以預設是777，根據<sup id=fnref1:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>，只需要設定600就可以過了，同時也可以直接看該檔案在img file中的mode是多少
<img src=https://hackmd.io/_uploads/BJYm760JT.png alt></p></li></ol><h2 id=exploit>Exploit
<a class=anchor href=#exploit>#</a></h2><pre tabindex=0><code class=language-bash! data-lang=bash!>$ ll
-rwxrwxrwx 1 sbk6401 sbk6401  411 Sep 25 13:59 ssh-private-key
$ chmod 600 ssh-private-key
$ ssh -i ssh-private-key -p 57846 ctf-player@saturn.picoctf.net
Welcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.19.0-1024-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that users do not log into.

To restore this content, you can run the &#39;unminimize&#39; command.

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

ctf-player@challenge:~$ ls
flag.txt
ctf-player@challenge:~$ cat flag.txt
picoCTF{k3y_5l3u7h_af277f77}ctf-player@challenge:~$ Connection to saturn.picoctf.net closed by remote host.
Connection to saturn.picoctf.net closed.
</code></pre><p>Flag: <code>picoCTF{k3y_5l3u7h_af277f77}</code></p><h2 id=reference>Reference
<a class=anchor href=#reference>#</a></h2><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href="https://youtu.be/fGWdueqArzE?si=Ci0W715ZjQ3vPD8m">picoGym (picoCTF) Exercise: Operation Oni </a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://stackoverflow.com/questions/9270734/ssh-permissions-are-too-open>ssh &ldquo;permissions are too open&rdquo;</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#background>Background</a><ul><li><a href=#iso和img的區別>ISO和IMG的區別</a></li></ul></li><li><a href=#description>Description</a></li><li><a href=#recon>Recon</a></li><li><a href=#exploit>Exploit</a></li><li><a href=#reference>Reference</a></li></ul></nav></div></aside></main></body></html>