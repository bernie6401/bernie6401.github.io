<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  HackTheBox
  #

[TOC]

  Web Requests-GET
  #


  Background
  #

cURL - GET/Header

  Exploit
  #

$ curl &#39;http://144.126.206.249:31846/search.php?search=flag&#39; -H &#39;Authorization: Basic YWRtaW46YWRtaW4=&#39;
flag: HTB{curl_g3773r}

  Web Requests-POST
  #


  Background
  #

cURL - POST/Cookie/Json Data/Header

  Exploit
  #

$ curl &#39;http://142.93.47.151:30718/search.php&#39; -b &#39;PHPSESSID=darsv7lbe3aa22nv4v82h039p6&#39; -X POST -d &#39;{"search":"flag"}&#39; -H &#39;Content-Type: application/json&#39;
["flag: HTB{p0$t_r3p34t3r}"]%

  Web Requests-CRUD
  #


  Background
  #


  Exploit
  #

# Read all the city
$ curl -s http://165.232.44.246:31084/api.php/city/ \| jq
[{"city_name":"London","country_name":"(UK)"},{"city_name":"Birmingham","country_name":"(UK)"},{"city_name":"Leeds","country_name":"(UK)"},{"city_name":"Glasgow","country_name":"(UK)"},{"city_name":"Sheffield","country_name":"(UK)"}...,{"city_name":"Baltimore","country_name":"(US)"}]%

# Update city Baltimore to flag
$ curl -X PUT http://165.232.44.246:31084/api.php/city/Baltimore -d &#39;{"city_name":"flag", "country_name":"(US)"}&#39; -H &#39;Content-Type: application/json&#39;

# Delete any city
$ curl -X DELETE http://165.232.44.246:31084/api.php/city/Detroit

# Read city named flag to get flag
$ curl -s http://165.232.44.246:32034/api.php/city/ \| jqcurl -s http://165.232.44.246:31084/api.php/city/flag
[{"city_name":"flag","country_name":"HTB{crud_4p!_m4n!pul4t0r}"}]%

  JavaScript Deobfuscation-Decoding
  #


  Exploit
  #

Use CypherChef First to decode N2gxNV8xNV9hX3MzY3IzN19tMzU1NGcz'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/security/practice/hackthebox/hackthebox/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="HackTheBox"><meta property="og:description" content='HackTheBox # [TOC]
Web Requests-GET # Background # cURL - GET/Header
Exploit # $ curl &#39;http://144.126.206.249:31846/search.php?search=flag&#39; -H &#39;Authorization: Basic YWRtaW46YWRtaW4=&#39; flag: HTB{curl_g3773r} Web Requests-POST # Background # cURL - POST/Cookie/Json Data/Header
Exploit # $ curl &#39;http://142.93.47.151:30718/search.php&#39; -b &#39;PHPSESSID=darsv7lbe3aa22nv4v82h039p6&#39; -X POST -d &#39;{"search":"flag"}&#39; -H &#39;Content-Type: application/json&#39; ["flag: HTB{p0$t_r3p34t3r}"]% Web Requests-CRUD # Background # Exploit # # Read all the city $ curl -s http://165.232.44.246:31084/api.php/city/ \| jq [{"city_name":"London","country_name":"(UK)"},{"city_name":"Birmingham","country_name":"(UK)"},{"city_name":"Leeds","country_name":"(UK)"},{"city_name":"Glasgow","country_name":"(UK)"},{"city_name":"Sheffield","country_name":"(UK)"}...,{"city_name":"Baltimore","country_name":"(US)"}]% # Update city Baltimore to flag $ curl -X PUT http://165.232.44.246:31084/api.php/city/Baltimore -d &#39;{"city_name":"flag", "country_name":"(US)"}&#39; -H &#39;Content-Type: application/json&#39; # Delete any city $ curl -X DELETE http://165.232.44.246:31084/api.php/city/Detroit # Read city named flag to get flag $ curl -s http://165.232.44.246:32034/api.php/city/ \| jqcurl -s http://165.232.44.246:31084/api.php/city/flag [{"city_name":"flag","country_name":"HTB{crud_4p!_m4n!pul4t0r}"}]% JavaScript Deobfuscation-Decoding # Exploit # Use CypherChef First to decode N2gxNV8xNV9hX3MzY3IzN19tMzU1NGcz'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="security"><meta property="article:tag" content="CTF"><meta property="article:tag" content="Hackthebox"><title>HackTheBox | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/security/practice/hackthebox/hackthebox/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>HackTheBox</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#web-requests-get><a href=https://academy.hackthebox.com/module/35/section/247>Web Requests-GET</a></a><ul><li><a href=#background>Background</a></li><li><a href=#exploit>Exploit</a></li></ul></li><li><a href=#web-requests-post><a href=https://academy.hackthebox.com/module/35/section/224>Web Requests-POST</a></a><ul><li><a href=#background-1>Background</a></li><li><a href=#exploit-1>Exploit</a></li></ul></li><li><a href=#web-requests-crud><a href=https://academy.hackthebox.com/module/35/section/227>Web Requests-CRUD</a></a><ul><li><a href=#background-2>Background</a></li><li><a href=#exploit-2>Exploit</a></li></ul></li><li><a href=#javascript-deobfuscation-decoding><a href=https://academy.hackthebox.com/module/41/section/445>JavaScript Deobfuscation-Decoding</a></a><ul><li><a href=#exploit-3>Exploit</a></li></ul></li><li><a href=#javascript-deobfuscation-skills-assessment><a href=https://academy.hackthebox.com/module/41/section/519>JavaScript Deobfuscation-Skills Assessment</a></a><ul><li><a href=#exploit-4>Exploit</a></li></ul></li><li><a href=#getting-start-service-scanning><a href=https://academy.hackthebox.com/module/77/section/726>Getting Start-Service Scanning</a></a><ul><li><a href=#background-3>Background</a></li><li><a href=#exploit-5>Exploit</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=hackthebox>HackTheBox
<a class=anchor href=#hackthebox>#</a></h1><p>[TOC]</p><h2 id=web-requests-get><a href=https://academy.hackthebox.com/module/35/section/247>Web Requests-GET</a>
<a class=anchor href=#web-requests-get>#</a></h2><h3 id=background>Background
<a class=anchor href=#background>#</a></h3><p>cURL - GET/Header</p><h3 id=exploit>Exploit
<a class=anchor href=#exploit>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ curl <span style=color:#e6db74>&#39;http://144.126.206.249:31846/search.php?search=flag&#39;</span> -H <span style=color:#e6db74>&#39;Authorization: Basic YWRtaW46YWRtaW4=&#39;</span>
</span></span><span style=display:flex><span>flag: HTB<span style=color:#f92672>{</span>curl_g3773r<span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=web-requests-post><a href=https://academy.hackthebox.com/module/35/section/224>Web Requests-POST</a>
<a class=anchor href=#web-requests-post>#</a></h2><h3 id=background-1>Background
<a class=anchor href=#background-1>#</a></h3><p>cURL - POST/Cookie/Json Data/Header</p><h3 id=exploit-1>Exploit
<a class=anchor href=#exploit-1>#</a></h3><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl &#39;http://142.93.47.151:30718/search.php&#39; -b &#39;PHPSESSID=darsv7lbe3aa22nv4v82h039p6&#39; -X POST -d &#39;{&#34;search&#34;:&#34;flag&#34;}&#39; -H &#39;Content-Type: application/json&#39;
[&#34;flag: HTB{p0$t_r3p34t3r}&#34;]%
</code></pre><h2 id=web-requests-crud><a href=https://academy.hackthebox.com/module/35/section/227>Web Requests-CRUD</a>
<a class=anchor href=#web-requests-crud>#</a></h2><h3 id=background-2>Background
<a class=anchor href=#background-2>#</a></h3><h3 id=exploit-2>Exploit
<a class=anchor href=#exploit-2>#</a></h3><pre tabindex=0><code class=language-bash! data-lang=bash!># Read all the city
$ curl -s http://165.232.44.246:31084/api.php/city/ \| jq
[{&#34;city_name&#34;:&#34;London&#34;,&#34;country_name&#34;:&#34;(UK)&#34;},{&#34;city_name&#34;:&#34;Birmingham&#34;,&#34;country_name&#34;:&#34;(UK)&#34;},{&#34;city_name&#34;:&#34;Leeds&#34;,&#34;country_name&#34;:&#34;(UK)&#34;},{&#34;city_name&#34;:&#34;Glasgow&#34;,&#34;country_name&#34;:&#34;(UK)&#34;},{&#34;city_name&#34;:&#34;Sheffield&#34;,&#34;country_name&#34;:&#34;(UK)&#34;}...,{&#34;city_name&#34;:&#34;Baltimore&#34;,&#34;country_name&#34;:&#34;(US)&#34;}]%

# Update city Baltimore to flag
$ curl -X PUT http://165.232.44.246:31084/api.php/city/Baltimore -d &#39;{&#34;city_name&#34;:&#34;flag&#34;, &#34;country_name&#34;:&#34;(US)&#34;}&#39; -H &#39;Content-Type: application/json&#39;

# Delete any city
$ curl -X DELETE http://165.232.44.246:31084/api.php/city/Detroit

# Read city named flag to get flag
$ curl -s http://165.232.44.246:32034/api.php/city/ \| jqcurl -s http://165.232.44.246:31084/api.php/city/flag
[{&#34;city_name&#34;:&#34;flag&#34;,&#34;country_name&#34;:&#34;HTB{crud_4p!_m4n!pul4t0r}&#34;}]%
</code></pre><h2 id=javascript-deobfuscation-decoding><a href=https://academy.hackthebox.com/module/41/section/445>JavaScript Deobfuscation-Decoding</a>
<a class=anchor href=#javascript-deobfuscation-decoding>#</a></h2><h3 id=exploit-3>Exploit
<a class=anchor href=#exploit-3>#</a></h3><p>Use CypherChef First to decode <code>N2gxNV8xNV9hX3MzY3IzN19tMzU1NGcz</code></p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl -s http://144.126.206.249:31094/serial.php -X POST -d &#34;serial=7h15_15_a_s3cr37_m3554g3&#34;
HTB{ju57_4n07h3r_r4nd0m_53r14l}
</code></pre><h2 id=javascript-deobfuscation-skills-assessment><a href=https://academy.hackthebox.com/module/41/section/519>JavaScript Deobfuscation-Skills Assessment</a>
<a class=anchor href=#javascript-deobfuscation-skills-assessment>#</a></h2><h3 id=exploit-4>Exploit
<a class=anchor href=#exploit-4>#</a></h3><ol><li><p>Ans: <code>api.min.js</code></p></li><li><p>Ans: <code>HTB{j4v45cr1p7_3num3r4710n_15_k3y}</code>
Use <a href=http://jsnice.org/>online tool</a> to deobfuscate the code</p></li><li><p>Ans: <code>HTB{n3v3r_run_0bfu5c473d_c0d3!}</code>
Use <a href=http://jsnice.org/>online tool</a> to deobfuscate the code</p></li><li><p>Ans: <code>4150495f70336e5f37333537316e365f31355f66756e</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#39;use strict&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return {undefined}
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>apiKeys</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** @type {string} */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>flag</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;HTB{n&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;3v3r_&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;run_0&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;bfu5c&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;473d_&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;c0d3!&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;}&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** @type {!XMLHttpRequest} */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>xhr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>XMLHttpRequest</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** @type {string} */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/keys&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.php&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xhr</span>[<span style=color:#e6db74>&#34;open&#34;</span>](<span style=color:#e6db74>&#34;POST&#34;</span>, <span style=color:#a6e22e>url</span>, <span style=color:#f92672>!!</span>[]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xhr</span>[<span style=color:#e6db74>&#34;send&#34;</span>](<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>[<span style=color:#e6db74>&#34;log&#34;</span>](<span style=color:#e6db74>&#34;HTB{j&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;4v45c&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;r1p7_&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;3num3&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;r4710&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;n_15_&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;k3y}&#34;</span>);
</span></span></code></pre></div><p>This main function is mainly send POST data to URL(<code>/keys.php</code>). So, we can simulate this action by burp suite or cURL.
<img src=https://hackmd.io/_uploads/H1KFZyOY3.png alt="reference link"></p></li><li><p>Ans: <code>HTB{r34dy_70_h4ck_my_w4y_1n_2_HTB}</code>
Use CypherChef to decode the code we obtained above.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$  curl -s http://165.232.42.76:32325/keys.php -X POST -d <span style=color:#e6db74>&#34;key=API_p3n_73571n6_15_fun&#34;</span>
</span></span><span style=display:flex><span>HTB<span style=color:#f92672>{</span>r34dy_70_h4ck_my_w4y_1n_2_HTB<span style=color:#f92672>}</span>%
</span></span></code></pre></div></li></ol><h2 id=getting-start-service-scanning><a href=https://academy.hackthebox.com/module/77/section/726>Getting Start-Service Scanning</a>
<a class=anchor href=#getting-start-service-scanning>#</a></h2><p>:::info
Must use Ubuntu 18.04.6 LTS to connect SMB server</p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ sudo openvpn {ovpn file}
</code></pre><p>:::</p><h3 id=background-3>Background
<a class=anchor href=#background-3>#</a></h3><p>NMAP/SMB
<a href=https://blog.csdn.net/FruitDrop/article/details/66475465>Ubuntu SMB Command</a>
<a href=https://www.itprotoday.com/linux/linuxs-smbclient-command#close-modal>Ubuntu SMB Command 2</a></p><h3 id=exploit-5>Exploit
<a class=anchor href=#exploit-5>#</a></h3><ol><li>Ans: Apache Tomcat</li><li>Ans: 2323<pre tabindex=0><code class=language-bash! data-lang=bash!>$ nmap -sV 10.129.136.29
Starting Nmap 7.80 ( https://nmap.org ) at 2023-07-10 15:56 CST
Nmap scan report for 10.129.136.29
Host is up (0.43s latency).
Not shown: 993 closed ports
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 3.0.3
22/tcp   open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        Apache httpd 2.4.41 ((Ubuntu))
139/tcp  open  netbios-ssn Samba smbd 4.6.2
445/tcp  open  netbios-ssn Samba smbd 4.6.2
2323/tcp open  telnet      Linux telnetd
8080/tcp open  http        Apache Tomcat
Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 55.86 seconds
</code></pre></li><li>Ans: <code>dceece590f3284c3866305eb2473d099</code></li></ol><ul><li>Check share name first<pre tabindex=0><code class=language-bash! data-lang=bash!>$ smbclient -N -L \\\\10.129.136.29
WARNING: The &#34;syslog&#34; option is deprecated

        Sharename       Type      Comment
        ---------       ----      -------
        print$          Disk      Printer Drivers
        users           Disk
        IPC$            IPC       IPC Service (gs-svcscan server (Samba, Ubuntu))
Reconnecting with SMB1 for workgroup listing.
protocol negotiation failed: NT_STATUS_INVALID_NETWORK_RESPONSE
Failed to connect with SMB1 -- no workgroup available 
</code></pre></li><li>Login by user bob and get flag.txt<pre tabindex=0><code class=language-bash! data-lang=bash!>$ smbclient -U bob \\\\10.129.136.29\\users
WARNING: The &#34;syslog&#34; option is deprecated
Enter WORKGROUP\bob&#39;s password:
Try &#34;help&#34; to get a list of possible commands.
smb: \&gt; dir
  .                                   D        0  Fri Feb 26 07:06:52 2021
  ..                                  D        0  Fri Feb 26 04:05:31 2021
  flag                                D        0  Fri Feb 26 07:09:26 2021
  bob                                 D        0  Fri Feb 26 05:42:23 2021
cd f
                4062912 blocks of size 1024. 1124740 blocks available
smb: \&gt; cd flag\
smb: \flag\&gt; get flag.txt
getting file \flag\flag.txt of size 33 as flag.txt (0.0 KiloBytes/sec) (average 0.0 KiloBytes/sec)
smb: \flag\&gt; exit
$ cat flag.txt
dceece590f3284c3866305eb2473d099
</code></pre></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#web-requests-get><a href=https://academy.hackthebox.com/module/35/section/247>Web Requests-GET</a></a><ul><li><a href=#background>Background</a></li><li><a href=#exploit>Exploit</a></li></ul></li><li><a href=#web-requests-post><a href=https://academy.hackthebox.com/module/35/section/224>Web Requests-POST</a></a><ul><li><a href=#background-1>Background</a></li><li><a href=#exploit-1>Exploit</a></li></ul></li><li><a href=#web-requests-crud><a href=https://academy.hackthebox.com/module/35/section/227>Web Requests-CRUD</a></a><ul><li><a href=#background-2>Background</a></li><li><a href=#exploit-2>Exploit</a></li></ul></li><li><a href=#javascript-deobfuscation-decoding><a href=https://academy.hackthebox.com/module/41/section/445>JavaScript Deobfuscation-Decoding</a></a><ul><li><a href=#exploit-3>Exploit</a></li></ul></li><li><a href=#javascript-deobfuscation-skills-assessment><a href=https://academy.hackthebox.com/module/41/section/519>JavaScript Deobfuscation-Skills Assessment</a></a><ul><li><a href=#exploit-4>Exploit</a></li></ul></li><li><a href=#getting-start-service-scanning><a href=https://academy.hackthebox.com/module/77/section/726>Getting Start-Service Scanning</a></a><ul><li><a href=#background-3>Background</a></li><li><a href=#exploit-5>Exploit</a></li></ul></li></ul></nav></div></aside></main></body></html>