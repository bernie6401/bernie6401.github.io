<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Docker Cheat Sheet
  #


  Background
  #

Docker筆記 - Docker基礎教學
Docker筆記 - 進入Container，建立並操作 PostgreSQL Container
Docker筆記 - 更改Container的Configuration
Docker筆記 - 讓資料遠離Container，使用 Volume、Bind Mount 與 Tmpfs Mount
Docker Docker Compose與Dockerfile差別 
Docker Compose 指令

  Command
  #


Know docker container name
$ docker ps
# Then you'll find the container name at the end of the result

Go into container bash shell
$ docker exec -it <container_name> bash

# 以root的身份進入container
# 極度建議以此方法進入bash
$ docker exec -u root -it <container_id> /bin/bash

Check Log
$ docker-compose logs

啟動所有的 Docker Container 指令如下
$ docker-compose up -d

停止 docker-compose 執行的所有 Container
$ docker-compose stop

刪除 docker-compose 的所有 Container
$ docker-compose rm

Leave Container
exit or ctrl-D
利用Dockerfile build一個Images並且實際跑起來
$ docker run -it --rm $(docker build -q .) /bin/sh


:::spoiler 實作"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/tools/others/docker-cheat-sheet/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="Docker Cheat Sheet"><meta property="og:description" content="Docker Cheat Sheet # Background # Docker筆記 - Docker基礎教學 Docker筆記 - 進入Container，建立並操作 PostgreSQL Container Docker筆記 - 更改Container的Configuration Docker筆記 - 讓資料遠離Container，使用 Volume、Bind Mount 與 Tmpfs Mount Docker Docker Compose與Dockerfile差別 Docker Compose 指令
Command # Know docker container name $ docker ps # Then you'll find the container name at the end of the result Go into container bash shell $ docker exec -it <container_name> bash # 以root的身份進入container # 極度建議以此方法進入bash $ docker exec -u root -it <container_id> /bin/bash Check Log $ docker-compose logs 啟動所有的 Docker Container 指令如下 $ docker-compose up -d 停止 docker-compose 執行的所有 Container $ docker-compose stop 刪除 docker-compose 的所有 Container $ docker-compose rm Leave Container exit or ctrl-D 利用Dockerfile build一個Images並且實際跑起來 $ docker run -it --rm $(docker build -q .) /bin/sh :::spoiler 實作"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="tools"><meta property="article:tag" content="Tools"><title>Docker Cheat Sheet | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/tools/others/docker-cheat-sheet/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Docker Cheat Sheet</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#command>Command</a></li><li><a href=#reference>Reference</a></li><li><a href=#padns-midterm-reference>PADNS Midterm Reference</a><ul><li><a href=#執行步驟>執行步驟</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=docker-cheat-sheet>Docker Cheat Sheet
<a class=anchor href=#docker-cheat-sheet>#</a></h1><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><p><a href=https://medium.com/alberthg-docker-notes/docker%e7%ad%86%e8%a8%98-docker%e5%9f%ba%e7%a4%8e%e6%95%99%e5%ad%b8-7bbe3a351caf>Docker筆記 - Docker基礎教學</a>
<a href=https://medium.com/alberthg-docker-notes/docker%e7%ad%86%e8%a8%98-%e9%80%b2%e5%85%a5container-%e5%bb%ba%e7%ab%8b%e4%b8%a6%e6%93%8d%e4%bd%9c-postgresql-container-d221ba39aaec>Docker筆記 - 進入Container，建立並操作 PostgreSQL Container</a>
<a href=https://medium.com/alberthg-docker-notes/docker%e7%ad%86%e8%a8%98-%e6%9b%b4%e6%94%b9container%e7%9a%84configuration-5dc69d28a421>Docker筆記 - 更改Container的Configuration</a>
<a href=https://medium.com/alberthg-docker-notes/docker%e7%ad%86%e8%a8%98-%e8%ae%93%e8%b3%87%e6%96%99%e9%81%a0%e9%9b%a2container-%e4%bd%bf%e7%94%a8-volume-bind-mount-%e8%88%87-tmpfs-mount-6908da341d11>Docker筆記 - 讓資料遠離Container，使用 Volume、Bind Mount 與 Tmpfs Mount</a>
<a href=https://matthung0807.blogspot.com/2020/12/docker-docker-compose-dockerfile-difference.html>Docker Docker Compose與Dockerfile差別 </a><a href=https://osslab.tw/books/docker/page/docker-compose-%E6%8C%87%E4%BB%A4>Docker Compose 指令</a></p><h2 id=command>Command
<a class=anchor href=#command>#</a></h2><ul><li><a href="https://www.ibm.com/docs/en/workload-automation/9.5.0?topic=compose-accessing-docker-containers">Know docker container name</a><pre tabindex=0><code class=language-bash! data-lang=bash!>$ docker ps
# Then you&#39;ll find the container name at the end of the result
</code></pre></li><li><a href=https://matthung0807.blogspot.com/2020/10/docker-go-into-container-bash-shell.html>Go into container bash shell</a><pre tabindex=0><code class=language-bash! data-lang=bash!>$ docker exec -it &lt;container_name&gt; bash

# 以root的身份進入container
# 極度建議以此方法進入bash
$ docker exec -u root -it &lt;container_id&gt; /bin/bash
</code></pre></li><li>Check Log<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose logs
</span></span></code></pre></div></li><li>啟動所有的 Docker Container 指令如下<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose up -d
</span></span></code></pre></div></li><li>停止 docker-compose 執行的所有 Container<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose stop
</span></span></code></pre></div></li><li>刪除 docker-compose 的所有 Container<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose rm
</span></span></code></pre></div></li><li>Leave Container
<code>exit or ctrl-D</code></li><li>利用Dockerfile build一個Images並且實際跑起來<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker run -it --rm <span style=color:#66d9ef>$(</span>docker build -q .<span style=color:#66d9ef>)</span> /bin/sh
</span></span></code></pre></div></li></ul><p>:::spoiler 實作</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker pull httpd    <span style=color:#75715e># with the latest version</span>
</span></span><span style=display:flex><span>$ docker images        <span style=color:#75715e># check the current images status</span>
</span></span><span style=display:flex><span>REPOSITORY   TAG       IMAGE ID       CREATED      SIZE
</span></span><span style=display:flex><span>httpd        latest    75a48b16cd56   <span style=color:#ae81ff>4</span> days ago   168MB
</span></span><span style=display:flex><span>$ docker create --name test -p 8080:80 httpd    <span style=color:#75715e># create a container with the name test and port number is 80</span>
</span></span><span style=display:flex><span>70fd43b63fa04c0daebd8128eff7ec58de26cb5c4c7bf63c0cf30fd03d07f1ab
</span></span><span style=display:flex><span>$ docker start 70fd43b63fa0    <span style=color:#75715e># start the container</span>
</span></span><span style=display:flex><span>70fd43b63fa0
</span></span><span style=display:flex><span>$ docker ps -a                 <span style=color:#75715e># check container status</span>
</span></span><span style=display:flex><span>CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS          PORTS                  NAMES
</span></span><span style=display:flex><span>70fd43b63fa0   httpd     <span style=color:#e6db74>&#34;httpd-foreground&#34;</span>       <span style=color:#ae81ff>2</span> minutes ago   Up <span style=color:#ae81ff>27</span> seconds   0.0.0.0:8080-&gt;80/tcp   test
</span></span><span style=display:flex><span>$ docker exec -it test bash    <span style=color:#75715e># get into container with bash shell as terminal</span>
</span></span><span style=display:flex><span>root@70fd43b63fa0:/usr/local/apache2#
</span></span></code></pre></div><p>:::</p><h2 id=reference>Reference
<a class=anchor href=#reference>#</a></h2><p><a href=https://ithelp.ithome.com.tw/articles/10194183>Day 24：使用 Docker-Compose 啟動多個 Docker Container </a><a href="https://campus-xoops.tn.edu.tw/modules/tad_book3/page.php?tbdsn=220">設定php.ini</a>
<a href=https://ithelp.ithome.com.tw/articles/10186431>【Day 3】 - Docker 基本指令操作</a></p><h2 id=padns-midterm-reference>PADNS Midterm Reference
<a class=anchor href=#padns-midterm-reference>#</a></h2><p><a href=https://penueling.com/%E7%B7%9A%E4%B8%8A%E5%AD%B8%E7%BF%92/%E4%BD%BF%E7%94%A8-docker-%E6%9E%B6%E8%A8%AD-wordpress-%E7%B6%B2%E7%AB%99/>使用 docker 架設 wordpress 網站 </a><a href=https://blog.csdn.net/daerzei/article/details/123488593>ubuntu安装nginx报错:Failed to start A high performance web server and a reverse proxy server</a></p><h3 id=執行步驟>執行步驟
<a class=anchor href=#%e5%9f%b7%e8%a1%8c%e6%ad%a5%e9%a9%9f>#</a></h3><ol><li>Destroy Droplet
<img src=https://i.imgur.com/xBM8d8z.png alt></li><li>Use the new password to login(be send by Digital Ocean)
<img src=https://i.imgur.com/X21VIIi.png alt>
And then change your password.</li><li>Follow the <a href=https://github.com/fei3363/WebSecurityCourse/tree/main/server>note</a> to install requirement application<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ apt-get update
</span></span><span style=display:flex><span>$ apt-get install ca-certificates curl gnupg lsb-release
</span></span><span style=display:flex><span>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span style=display:flex><span>$ echo <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;deb [arch=</span><span style=color:#66d9ef>$(</span>dpkg --print-architecture<span style=color:#66d9ef>)</span><span style=color:#e6db74> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> stable&#34;</span> | tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style=display:flex><span>$ apt-get update
</span></span><span style=display:flex><span>$ apt-get install docker-ce docker-ce-cli containerd.io
</span></span><span style=display:flex><span>$ docker run hello-world
</span></span><span style=display:flex><span>$ curl -L <span style=color:#e6db74>&#34;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-</span><span style=color:#66d9ef>$(</span>uname -s<span style=color:#66d9ef>)</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> -o /usr/local/bin/docker-compose
</span></span><span style=display:flex><span>$ chmod +x /usr/local/bin/docker-compose
</span></span><span style=display:flex><span>$ docker-compose --version
</span></span></code></pre></div></li><li>Deploy docker<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose up -d
</span></span></code></pre></div></li><li>外網掛域名<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ apt install nginx -y
</span></span><span style=display:flex><span>$ vim /etc/nginx/sites-enabled/website
</span></span><span style=display:flex><span>$ vim docker-compose.yml
</span></span><span style=display:flex><span><span style=color:#75715e># add hostname: test.fei.works</span>
</span></span><span style=display:flex><span>$ service nginx restart
</span></span></code></pre></div>:::danger
It can not set https
:::</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#command>Command</a></li><li><a href=#reference>Reference</a></li><li><a href=#padns-midterm-reference>PADNS Midterm Reference</a><ul><li><a href=#執行步驟>執行步驟</a></li></ul></li></ul></nav></div></aside></main></body></html>