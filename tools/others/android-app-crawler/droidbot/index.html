<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  Droidbot
  #

Official Github Repo其實也說明得非常清楚，但在初次執行的時候可能會出現以下問題，按照 APP自動化全站爬取探索 ，只要修改./droidbot/app.py的line 28就可以了
:::spoiler Execution Problem
$ droidbot -a ./base.apk/Mattermost.apk -grant_perm -script ./my_pass_login_script.json -keep_app
INFO:Device:disable minicap on sdk >= 32
Traceback (most recent call last):
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 96, in __init__
    self.app = App(app_path, output_dir=self.output_dir)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py", line 28, in __init__
    from androguard.core.bytecodes.apk import APK
ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39;
[CONNECTION] ADB is disconnected
WARNING:DroidBotIme:Failed to disconnect DroidBotIME!
Traceback (most recent call last):
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 96, in __init__
    self.app = App(app_path, output_dir=self.output_dir)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py", line 28, in __init__
    from androguard.core.bytecodes.apk import APK
ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39;

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "\\?\C:\Users\berni\anaconda3\envs\mitmproxy\Scripts\droidbot-script.py", line 33, in <module>
    sys.exit(load_entry_point(&#39;droidbot&#39;, &#39;console_scripts&#39;, &#39;droidbot&#39;)())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\start.py", line 145, in main
    droidbot = DroidBot(
               ^^^^^^^^^
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 116, in __init__
    self.stop()
  File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 191, in stop
    if hasattr(self.input_manager.policy, "master") and \
               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: &#39;NoneType&#39; object has no attribute &#39;policy&#39;
:::
'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/tools/others/android-app-crawler/droidbot/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="Droidbot"><meta property="og:description" content='Droidbot # Official Github Repo其實也說明得非常清楚，但在初次執行的時候可能會出現以下問題，按照 APP自動化全站爬取探索 ，只要修改./droidbot/app.py的line 28就可以了 :::spoiler Execution Problem
$ droidbot -a ./base.apk/Mattermost.apk -grant_perm -script ./my_pass_login_script.json -keep_app INFO:Device:disable minicap on sdk >= 32 Traceback (most recent call last): File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 96, in __init__ self.app = App(app_path, output_dir=self.output_dir) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py", line 28, in __init__ from androguard.core.bytecodes.apk import APK ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39; [CONNECTION] ADB is disconnected WARNING:DroidBotIme:Failed to disconnect DroidBotIME! Traceback (most recent call last): File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 96, in __init__ self.app = App(app_path, output_dir=self.output_dir) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py", line 28, in __init__ from androguard.core.bytecodes.apk import APK ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39; During handling of the above exception, another exception occurred: Traceback (most recent call last): File "\\?\C:\Users\berni\anaconda3\envs\mitmproxy\Scripts\droidbot-script.py", line 33, in <module> sys.exit(load_entry_point(&#39;droidbot&#39;, &#39;console_scripts&#39;, &#39;droidbot&#39;)()) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\start.py", line 145, in main droidbot = DroidBot( ^^^^^^^^^ File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 116, in __init__ self.stop() File "d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py", line 191, in stop if hasattr(self.input_manager.policy, "master") and \ ^^^^^^^^^^^^^^^^^^^^^^^^^ AttributeError: &#39;NoneType&#39; object has no attribute &#39;policy&#39; :::'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="tools"><meta property="article:tag" content="Tools"><title>Droidbot | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/tools/others/android-app-crawler/droidbot/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Droidbot</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#how-to-use>How to use</a><ul><li><a href=#一般使用>一般使用</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=droidbot>Droidbot
<a class=anchor href=#droidbot>#</a></h1><p><a href=https://github.com/honeynet/droidbot>Official Github Repo</a>其實也說明得非常清楚，但在初次執行的時候可能會出現以下問題，按照<a href=https://juejin.cn/post/7316582773434204171> APP自動化全站爬取探索 </a>，只要修改<code>./droidbot/app.py</code>的line 28就可以了
:::spoiler Execution Problem</p><pre tabindex=0><code class=language-bash! data-lang=bash!>$ droidbot -a ./base.apk/Mattermost.apk -grant_perm -script ./my_pass_login_script.json -keep_app
INFO:Device:disable minicap on sdk &gt;= 32
Traceback (most recent call last):
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py&#34;, line 96, in __init__
    self.app = App(app_path, output_dir=self.output_dir)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py&#34;, line 28, in __init__
    from androguard.core.bytecodes.apk import APK
ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39;
[CONNECTION] ADB is disconnected
WARNING:DroidBotIme:Failed to disconnect DroidBotIME!
Traceback (most recent call last):
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py&#34;, line 96, in __init__
    self.app = App(app_path, output_dir=self.output_dir)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\app.py&#34;, line 28, in __init__
    from androguard.core.bytecodes.apk import APK
ModuleNotFoundError: No module named &#39;androguard.core.bytecodes&#39;

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File &#34;\\?\C:\Users\berni\anaconda3\envs\mitmproxy\Scripts\droidbot-script.py&#34;, line 33, in &lt;module&gt;
    sys.exit(load_entry_point(&#39;droidbot&#39;, &#39;console_scripts&#39;, &#39;droidbot&#39;)())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\start.py&#34;, line 145, in main
    droidbot = DroidBot(
               ^^^^^^^^^
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py&#34;, line 116, in __init__
    self.stop()
  File &#34;d:\ntu\thesis\mitm framework\code\appcrawler\droidbot\droidbot\droidbot.py&#34;, line 191, in stop
    if hasattr(self.input_manager.policy, &#34;master&#34;) and \
               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: &#39;NoneType&#39; object has no attribute &#39;policy&#39;
</code></pre><p>:::
<img src=https://hackmd.io/_uploads/HJwvucL2A.png alt=image></p><pre tabindex=0><code class=language-python! data-lang=python!># from androguard.core.bytecodes.apk import APK
from androguard.core.apk import APK
</code></pre><h2 id=how-to-use>How to use
<a class=anchor href=#how-to-use>#</a></h2><h3 id=一般使用>一般使用
<a class=anchor href=#%e4%b8%80%e8%88%ac%e4%bd%bf%e7%94%a8>#</a></h3><pre tabindex=0><code class=language-bash! data-lang=bash!>$ droidbot -a &lt;path to apk&gt; -o &lt;path to output&gt;
</code></pre><p>:::warning
如果遇到任何出現寫入資訊錯誤或是decode出現錯誤的狀況，要直接看stack回推，並且把encoding改成utf-8，以autodroid為例是在<code>./droidbot/device_state.py</code>的#63，加入<code>encoding='utf-8'</code>, droidbot的忘記在哪裡改了，總之也是同樣的問題</p><pre tabindex=0><code class="language-python=53" data-lang="python=53">    def _save_important_view_ids(self):
        _, _, _, important_view_ids = self.get_described_actions(remove_time_and_ip=False)
        ids_path = self.device.output_dir +&#39;/states_view_ids&#39;
        if not os.path.exists(ids_path):
            os.mkdir(ids_path)
        # if not isinstance(current_state, str):
        #     current_state_str = current_state.state_str
        # else:
        #     current_state_str = current_state
        important_view_id_path = self.device.output_dir +&#39;/states_view_ids/&#39;+ self.state_str + &#39;.txt&#39;
        f = open(important_view_id_path, &#39;w&#39;, encoding=&#39;utf-8&#39;)
        f.write(str(important_view_ids))
        f.close()
</code></pre><p>:::</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#how-to-use>How to use</a><ul><li><a href=#一般使用>一般使用</a></li></ul></li></ul></nav></div></aside></main></body></html>