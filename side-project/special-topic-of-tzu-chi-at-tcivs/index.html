<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Special Topic of Tzu-Chi at TCIVS
  #


  tags: TCIVS Side Project Special Topic
  #

:::spoiler
[TOC]
:::

  Purpose of this file
  #


I just want to write up some problems while I set up the environment and hardware of this project


  Hardware info.
  #


  
      
          Spec.
          Raspberry Pi 3 Model B+
      
  
  
      
          CPU
          ARM Cortex-A53 1.4GHz
      
      
          RAM
          1GB SRAM
      
      
          Wi-Fi
          2.4GHz and 5GHz
      
      
          Ethernet speed
          300Mbps
      
      
          Bluetooth
          4..2
      
  


  Set up sequence(Ideal)
  #


Install OS to Raspberry pi

You can just check this page"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bernie6401.github.io/side-project/special-topic-of-tzu-chi-at-tcivs/"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="Special Topic of Tzu-Chi at TCIVS"><meta property="og:description" content="Special Topic of Tzu-Chi at TCIVS # tags: TCIVS Side Project Special Topic # :::spoiler [TOC] :::
Purpose of this file # I just want to write up some problems while I set up the environment and hardware of this project Hardware info. # Spec. Raspberry Pi 3 Model B+ CPU ARM Cortex-A53 1.4GHz RAM 1GB SRAM Wi-Fi 2.4GHz and 5GHz Ethernet speed 300Mbps Bluetooth 4..2 Set up sequence(Ideal) # Install OS to Raspberry pi You can just check this page"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="side-project"><meta property="article:tag" content="Side Project"><meta property="article:tag" content="Special Topic"><meta property="article:tag" content="TCIVS"><title>Special Topic of Tzu-Chi at TCIVS | SBK Hugo Site</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://bernie6401.github.io/side-project/special-topic-of-tzu-chi-at-tcivs/><link rel=stylesheet href=/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.acdc41c8d39e6c69d70d8a23779875e0a3733fefead3e428d5344966bb12f562.js integrity="sha256-rNxByNOebGnXDYojd5h14KNzP+/q0+Qo1TRJZrsS9WI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>SBK Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Special Topic of Tzu-Chi at TCIVS</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#purpose-of-this-file>Purpose of this file</a></li><li><a href=#hardware-info>Hardware info.</a></li><li><a href=#set-up-sequenceideal>Set up sequence(Ideal)</a></li><li><a href=#problem>Problem</a></li><li><a href=#conclusion-for-the-above>Conclusion for the above</a></li><li><a href=#new-solution>New Solution</a></li><li><a href=#practical-solution>Practical Solution</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=special-topic-of-tzu-chi-at-tcivs>Special Topic of Tzu-Chi at TCIVS
<a class=anchor href=#special-topic-of-tzu-chi-at-tcivs>#</a></h1><h6 id=tags-tcivs-side-project-special-topic>tags: <code>TCIVS</code> <code>Side Project</code> <code>Special Topic</code>
<a class=anchor href=#tags-tcivs-side-project-special-topic>#</a></h6><p>:::spoiler
[TOC]
:::</p><h2 id=purpose-of-this-file>Purpose of this file
<a class=anchor href=#purpose-of-this-file>#</a></h2><ul><li>I just want to write up some problems while I set up the environment and hardware of this project</li></ul><h2 id=hardware-info>Hardware info.
<a class=anchor href=#hardware-info>#</a></h2><table><thead><tr><th style=text-align:center>Spec.</th><th style=text-align:center>Raspberry Pi 3 Model B+</th></tr></thead><tbody><tr><td style=text-align:center>CPU</td><td style=text-align:center>ARM Cortex-A53 1.4GHz</td></tr><tr><td style=text-align:center>RAM</td><td style=text-align:center>1GB SRAM</td></tr><tr><td style=text-align:center>Wi-Fi</td><td style=text-align:center>2.4GHz and 5GHz</td></tr><tr><td style=text-align:center>Ethernet speed</td><td style=text-align:center>300Mbps</td></tr><tr><td style=text-align:center>Bluetooth</td><td style=text-align:center>4..2</td></tr></tbody></table><h2 id=set-up-sequenceideal>Set up sequence(Ideal)
<a class=anchor href=#set-up-sequenceideal>#</a></h2><ul><li>Install OS to Raspberry pi<blockquote><p>You can just check this <a href=https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#4-boot-ubuntu-server>page</a></p></blockquote><pre tabindex=0><code>$  vim /etc/netplan/50-cloud-init.yaml
(add the line at the end, and the indentation is very important)
wifis:
	wlan0:
	dhcp4: true
	optional: true
	access-points:
		&#34;home network&#34;:
			password: &#34;123456789&#34;
$  sudo reboot
</code></pre></li><li>Install Anaconda in a correct version<pre tabindex=0><code>$  cd ~
$  curl -O https://repo.anaconda.com/archive/Anaconda3-2021.04-Linux-aarch64.sh
$  bash Anaconda3-2021.04-Linux-aarch64.sh
$  vim ~/.bashrc
(add &#34;export PATH=&#39;/home/ubuntu/anaconda3/bin:$PATH&#39; at the end&#34;)
$  source ~/.bashrc
$  sudo reboot
</code></pre></li><li>Install the Library you need<pre tabindex=0><code>$  conda install -c anaconda scipy
$  conda install -c conda-forge/label/broken tensorflow
$  pip install opencv-contrib-python
$  conda install -c anaconda numpy
$  conda install -c anaconda requests
$  conda install -c conda-forge keras

$  conda install -c conda-forge imutils
$  conda install -c conda-forge face_recognition
$  conda install -c conda-forge dlib
</code></pre></li><li>Run the python file you mount from the external disk, e.g. flash disk</li></ul><h2 id=problem>Problem
<a class=anchor href=#problem>#</a></h2><ol><li><p>There&rsquo;re 3 different OSs can choose including <strong>Raspberry Pi OS</strong>, <strong>Ubuntu server</strong>, <strong>Ubuntu desktop</strong></p><ul><li>First of all is Raspberry Pi OS(32-bits), because it&rsquo;s an official recommendation, I install it first. But as I show the spec. above, the CPU is 64-bits and you must run <strong>Raspberry Pi Imager</strong> before you install OS to Raspberry Pi. Then your OS architecture will be not compatible with Anaconda though it has a 32-bits version as well. You&rsquo;ll get the error.</li><li>The second one is Ubuntu-Desktop (22.04 or 20.04). It&rsquo;ll get frozen all the time because of the small SRAM with 1GB</li><li>The third one seems quite a good choice as an OS. It&rsquo;ll not get frozen because it&rsquo;s just a simple CLI system and it also has an aarch64 version. Then the statements below are the problems you&rsquo;ll encounter.</li></ul></li><li><p>If I install Anaconda correctly, I&rsquo;ll encounter a problem that <strong>conda create</strong> instruction can not be used. You&rsquo;ll get an error message like this: <strong>Illegal instruction(core dumped)</strong>.</p><ul><li><a href=https://github.com/conda/conda/issues/10723>Solution</a> by installing Miniconda.</li></ul><ul><li><p>But&mldr;miniconda still has another problem: version conflict with the library. So, this is not the best solution as well.</p></li><li><p>For more information on this solution: though I can use <strong>conda create</strong> instruction, I can not install python with the 3.6 version. The reason that I must install this version is for the library I want to install later. If I don&rsquo;t install version 3.6, I can&rsquo;t install <strong>imutils</strong>, <strong>face_recognition</strong>, and <strong>dlib</strong> at the same time. The other library list above including scipy, TensorFlow, NumPy, and so on will install successfully in versions 3.6 to 3.9.</p></li><li><p>Briefly speaking, because of my OS architecture, I can&rsquo;t install these 3 libraries by the statement that anaconda official supplied. I can install the package available on <strong>noarch</strong> or <strong>aarch64</strong> platform only.</p></li><li><p>For imutils, like the image below(img1)
<code>$ conda install --channel https://conda.anaconda.org/gilbertfrancoins imutils</code></p></li><li><p>For face_recognition, like the image below(img2)
<code>$ conda install --channel https://conda.anaconda.org/conda-forge face_recognition</code></p></li></ul><ul><li>You can check the error on this <a href=https://blog.csdn.net/ksws0292756/article/details/79192268>page</a>, then there is another problem I encounter is I can not use <strong>anaconda</strong> instruction to search the library package. So, I use my laptop(a normal win10 system) to search.</li></ul><ul><li>BTW, you can not use the x86 version, because it&rsquo;ll crash while the installation</li></ul></li></ol><hr><p><img src=./error_img/error_1.png alt=img1></p><hr><p><img src=./error_img/error_2.png alt=img1></p><hr><ol start=3><li><p>I also followed <a href=https://blog.csdn.net/YMWM_/article/details/107022521>this article</a> and tried to address this problem. Though it can use anaconda instruction smoothly, it still has some problems to solve(I forgot the problem, QAQ)</p></li><li><p>You might be wondering why I don&rsquo;t use pip instruction. Because you&rsquo;ll get an error message like this: <strong>Illegal instruction(core dumped)</strong>.</p></li><li><p>Other problems must address</p><ul><li>If you install OS and Anaconda successfully.</li></ul><pre tabindex=0><code>$  python
$  import numpy

(error message)
$  Illegal instruction(core dumped)
</code></pre></li></ol><h2 id=conclusion-for-the-above>Conclusion for the above
<a class=anchor href=#conclusion-for-the-above>#</a></h2><blockquote><p>The solutions above are not suitable for this project</p></blockquote><h2 id=new-solution>New Solution
<a class=anchor href=#new-solution>#</a></h2><p>This solution seems fine so far, so I write it up as below</p><ol><li>First, we can install <strong>Raspberry Pi OS (64-bit)</strong> by Raspberry Pi Imager. It has a desktop version and is still compatible with the hardware.</li><li>Second, install Miniconda by following the instruction on this <a href=https://blog.csdn.net/mtl1994/article/details/122240677>page</a>(PS version is Miniconda3-py37_4.9.2-Linux-aarch64.sh)</li><li>Third, create a new environment in Anaconda without python. You should install python independently(v3.6).<pre tabindex=0><code>$ conda install -c moussi python
$ conda install -c akode face_recognition_models
$ conda install -c gilbertfrancois imutils
$ conda install -c conda-forge fortran_stdlib
$ conda install -c jetson-tx2 scipy
$ conda install -c intel tensorflow-base
$ conda install -c anaconda numpy
$ conda install -c conda-forge/label/cf202003 requests
$ conda install -c conda-forge keras
$ pip install opencv-contrib-python
</code></pre>These libraries can be installed with python=3.6, but TensorFlow.
Please go to this <a href=https://anaconda.org>page</a> and search the library you want to install(set the platform filter as noarch or Linux-aarch64)</li></ol><h2 id=practical-solution>Practical Solution
<a class=anchor href=#practical-solution>#</a></h2><p>In order to avoid not being able to do it in the end, we change another solution with higher success rate - we used Arduino instead. You can check the code in <a href=https://github.com/bernie6401/TCIVS_Special_Topic/tree/master/serial_read>here</a>. And our os platform is my x86 laptop, we don&rsquo;t have the software compatible problem.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#purpose-of-this-file>Purpose of this file</a></li><li><a href=#hardware-info>Hardware info.</a></li><li><a href=#set-up-sequenceideal>Set up sequence(Ideal)</a></li><li><a href=#problem>Problem</a></li><li><a href=#conclusion-for-the-above>Conclusion for the above</a></li><li><a href=#new-solution>New Solution</a></li><li><a href=#practical-solution>Practical Solution</a></li></ul></nav></div></aside></main></body></html>