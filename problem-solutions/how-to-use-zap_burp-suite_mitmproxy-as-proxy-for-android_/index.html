<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.6.0+b932d301d7838f3c1a50e318e216b55ce5cc9148"><meta name=description content='How to use ZAP as Proxy? 根據1我大概知道怎麼使用，我們通常會使用zap的command line形式進行操作，詳細的參數可以參考Official Document，另外我看ZAP如果要當作Proxy的角色會需要用到ROOT CA憑證，所以如果單純用之前的教學文章會不知到在哪裡產生憑證，他已經移動到Network底下了 ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
目前我把Proxy架好了，看的是這篇教學文章-OWASP ZAP操作手冊，講的非常詳細
在Firefox中搜尋憑證或是cert，直接安裝在ZAP產生的憑證檔案 在Firefox的setting中搜尋Proxy ![圖片](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) 設定成如下 ![圖片](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) 只要ZAP有打開，就可以連線出去，但如果Proxy已經setup，卻沒有打開ZAP會通不到外面喔 補充 如果上述的步驟已經執行完但Proxy只能攔截到GET Method的封包，就代表憑證爛掉了，和在手機上一樣，但手機會出現這個問題還有可能是SSL Pinning，網頁端只需要重新安裝ZAP Generate的新憑證就好 如果設定Firefox的Proxy時，是設定成使用系統Proxy設定，那就要在電腦的設定中，更改Proxy的config ![圖片](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) 這樣的話ZAP也可以正常運作，但是就不會出現ZAP特定的畫面(功能) ![圖片](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) 只有設定成手動設定Proxy才會出現，否則會變成連線不上的畫面 How to use Burp Suite as Proxy? 這個完全是翻譯並且按照 Intercepting Android App Traffic with BurpSuite 的影片教學
Prepare (有取得Root實機的情況下) 如果要保險一點零失敗的達成目標，按照影片的步驟和環境比較好，如果是已經有一台取得Root的實機，就可以忽略用VMware開的Emulator
取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem 丟到手機端後直接在手機安裝憑證 接著就要參考How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?這篇文章下面註解的地方重新安裝AlwaysTrustUserCert.zip這個plugin，最保險的做法是 先把之前所有安裝的憑證刪除→ 重新啟動→ 重新安裝"所有"的憑證→ 重新安裝Magisk模組→ Reboot 接著就直接跳到下一段(實際攔截前) (利用VMware開Emulator) VMware 記得啟動 Virtualization 安裝Genymotion, virtualbox, adb 安裝前先到Genymotion官網註冊帳號 $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion 選擇Emulator的手機型號就可以開啟一個全新的Emulator 取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem # 這一段是顯示cert.pem這個檔案Subject的MD5 Hash Value，至於他怎麼做hash的，可以參考https://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713，他解釋該hash的標的為哪些，並不是針對這整個file做hash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # 複製cert.pem並改名成9a5ba575.0，會改成這樣是因為手機當中儲存憑證的方式就是這樣 $ cp cert.pem 9a5ba575.0 # 這一段是print出9a5ba575.0的subject，也就是上面做hash的標的就是下面這一串東西，所以只要是PortSwigger的憑證，只要他們沒有改subject，基本上做hash得到的結果都會是9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA 丟到手機端中儲存憑證的絕對位址 如果直接用adb push到該位置，會發現錯誤，原因是該位置是read only的狀態，所以我們要進到su進到root權限改變read only的狀態，再把東西丟進去就完成安裝了 $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ 實際攔截前 打開的Burp Suite一定要把Bind to address改成All interfaces ![圖片](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) 設定手機端的網路Proxy 這一部分就跟ZAP當初設定的時候一模一樣，當然也是可以像教學影片那樣用CLI的方式處理 $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy 接下來就可以實際攔截了 Bypass SSL Pinning by Frida 還記得之前做的實驗論文筆記中有提到，有一部分的app就算安裝了SSL Unpinning的Plugin還是無法攔截到流量，根據Defeating Android Certificate Pinning with Frida文章的說明，Facebook各式各樣的App所使用的憑證標準和實作方式都是自定義的，而不是用標準API，這樣的話用一般的SSL Unpinning就還是不會成功'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta name=twitter:description content='How to use ZAP as Proxy? 根據1我大概知道怎麼使用，我們通常會使用zap的command line形式進行操作，詳細的參數可以參考Official Document，另外我看ZAP如果要當作Proxy的角色會需要用到ROOT CA憑證，所以如果單純用之前的教學文章會不知到在哪裡產生憑證，他已經移動到Network底下了 ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
目前我把Proxy架好了，看的是這篇教學文章-OWASP ZAP操作手冊，講的非常詳細
在Firefox中搜尋憑證或是cert，直接安裝在ZAP產生的憑證檔案 在Firefox的setting中搜尋Proxy ![圖片](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) 設定成如下 ![圖片](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) 只要ZAP有打開，就可以連線出去，但如果Proxy已經setup，卻沒有打開ZAP會通不到外面喔 補充 如果上述的步驟已經執行完但Proxy只能攔截到GET Method的封包，就代表憑證爛掉了，和在手機上一樣，但手機會出現這個問題還有可能是SSL Pinning，網頁端只需要重新安裝ZAP Generate的新憑證就好 如果設定Firefox的Proxy時，是設定成使用系統Proxy設定，那就要在電腦的設定中，更改Proxy的config ![圖片](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) 這樣的話ZAP也可以正常運作，但是就不會出現ZAP特定的畫面(功能) ![圖片](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) 只有設定成手動設定Proxy才會出現，否則會變成連線不上的畫面 How to use Burp Suite as Proxy? 這個完全是翻譯並且按照 Intercepting Android App Traffic with BurpSuite 的影片教學
Prepare (有取得Root實機的情況下) 如果要保險一點零失敗的達成目標，按照影片的步驟和環境比較好，如果是已經有一台取得Root的實機，就可以忽略用VMware開的Emulator
取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem 丟到手機端後直接在手機安裝憑證 接著就要參考How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?這篇文章下面註解的地方重新安裝AlwaysTrustUserCert.zip這個plugin，最保險的做法是 先把之前所有安裝的憑證刪除→ 重新啟動→ 重新安裝"所有"的憑證→ 重新安裝Magisk模組→ Reboot 接著就直接跳到下一段(實際攔截前) (利用VMware開Emulator) VMware 記得啟動 Virtualization 安裝Genymotion, virtualbox, adb 安裝前先到Genymotion官網註冊帳號 $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion 選擇Emulator的手機型號就可以開啟一個全新的Emulator 取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem # 這一段是顯示cert.pem這個檔案Subject的MD5 Hash Value，至於他怎麼做hash的，可以參考https://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713，他解釋該hash的標的為哪些，並不是針對這整個file做hash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # 複製cert.pem並改名成9a5ba575.0，會改成這樣是因為手機當中儲存憑證的方式就是這樣 $ cp cert.pem 9a5ba575.0 # 這一段是print出9a5ba575.0的subject，也就是上面做hash的標的就是下面這一串東西，所以只要是PortSwigger的憑證，只要他們沒有改subject，基本上做hash得到的結果都會是9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA 丟到手機端中儲存憑證的絕對位址 如果直接用adb push到該位置，會發現錯誤，原因是該位置是read only的狀態，所以我們要進到su進到root權限改變read only的狀態，再把東西丟進去就完成安裝了 $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ 實際攔截前 打開的Burp Suite一定要把Bind to address改成All interfaces ![圖片](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) 設定手機端的網路Proxy 這一部分就跟ZAP當初設定的時候一模一樣，當然也是可以像教學影片那樣用CLI的方式處理 $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy 接下來就可以實際攔截了 Bypass SSL Pinning by Frida 還記得之前做的實驗論文筆記中有提到，有一部分的app就算安裝了SSL Unpinning的Plugin還是無法攔截到流量，根據Defeating Android Certificate Pinning with Frida文章的說明，Facebook各式各樣的App所使用的憑證標準和實作方式都是自定義的，而不是用標準API，這樣的話用一般的SSL Unpinning就還是不會成功'><meta property="og:url" content="https://bernie6401.github.io/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta property="og:description" content='How to use ZAP as Proxy? 根據1我大概知道怎麼使用，我們通常會使用zap的command line形式進行操作，詳細的參數可以參考Official Document，另外我看ZAP如果要當作Proxy的角色會需要用到ROOT CA憑證，所以如果單純用之前的教學文章會不知到在哪裡產生憑證，他已經移動到Network底下了 ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
目前我把Proxy架好了，看的是這篇教學文章-OWASP ZAP操作手冊，講的非常詳細
在Firefox中搜尋憑證或是cert，直接安裝在ZAP產生的憑證檔案 在Firefox的setting中搜尋Proxy ![圖片](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) 設定成如下 ![圖片](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) 只要ZAP有打開，就可以連線出去，但如果Proxy已經setup，卻沒有打開ZAP會通不到外面喔 補充 如果上述的步驟已經執行完但Proxy只能攔截到GET Method的封包，就代表憑證爛掉了，和在手機上一樣，但手機會出現這個問題還有可能是SSL Pinning，網頁端只需要重新安裝ZAP Generate的新憑證就好 如果設定Firefox的Proxy時，是設定成使用系統Proxy設定，那就要在電腦的設定中，更改Proxy的config ![圖片](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) 這樣的話ZAP也可以正常運作，但是就不會出現ZAP特定的畫面(功能) ![圖片](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) 只有設定成手動設定Proxy才會出現，否則會變成連線不上的畫面 How to use Burp Suite as Proxy? 這個完全是翻譯並且按照 Intercepting Android App Traffic with BurpSuite 的影片教學
Prepare (有取得Root實機的情況下) 如果要保險一點零失敗的達成目標，按照影片的步驟和環境比較好，如果是已經有一台取得Root的實機，就可以忽略用VMware開的Emulator
取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem 丟到手機端後直接在手機安裝憑證 接著就要參考How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?這篇文章下面註解的地方重新安裝AlwaysTrustUserCert.zip這個plugin，最保險的做法是 先把之前所有安裝的憑證刪除→ 重新啟動→ 重新安裝"所有"的憑證→ 重新安裝Magisk模組→ Reboot 接著就直接跳到下一段(實際攔截前) (利用VMware開Emulator) VMware 記得啟動 Virtualization 安裝Genymotion, virtualbox, adb 安裝前先到Genymotion官網註冊帳號 $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion 選擇Emulator的手機型號就可以開啟一個全新的Emulator 取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem # 這一段是顯示cert.pem這個檔案Subject的MD5 Hash Value，至於他怎麼做hash的，可以參考https://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713，他解釋該hash的標的為哪些，並不是針對這整個file做hash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # 複製cert.pem並改名成9a5ba575.0，會改成這樣是因為手機當中儲存憑證的方式就是這樣 $ cp cert.pem 9a5ba575.0 # 這一段是print出9a5ba575.0的subject，也就是上面做hash的標的就是下面這一串東西，所以只要是PortSwigger的憑證，只要他們沒有改subject，基本上做hash得到的結果都會是9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA 丟到手機端中儲存憑證的絕對位址 如果直接用adb push到該位置，會發現錯誤，原因是該位置是read only的狀態，所以我們要進到su進到root權限改變read only的狀態，再把東西丟進去就完成安裝了 $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ 實際攔截前 打開的Burp Suite一定要把Bind to address改成All interfaces ![圖片](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) 設定手機端的網路Proxy 這一部分就跟ZAP當初設定的時候一模一樣，當然也是可以像教學影片那樣用CLI的方式處理 $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy 接下來就可以實際攔截了 Bypass SSL Pinning by Frida 還記得之前做的實驗論文筆記中有提到，有一部分的app就算安裝了SSL Unpinning的Plugin還是無法攔截到流量，根據Defeating Android Certificate Pinning with Frida文章的說明，Facebook各式各樣的App所使用的憑證標準和實作方式都是自定義的，而不是用標準API，這樣的話用一般的SSL Unpinning就還是不會成功'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Problem Solutions"><meta property="article:tag" content="Problem Solution"><meta itemprop=name content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta itemprop=description content='How to use ZAP as Proxy? 根據1我大概知道怎麼使用，我們通常會使用zap的command line形式進行操作，詳細的參數可以參考Official Document，另外我看ZAP如果要當作Proxy的角色會需要用到ROOT CA憑證，所以如果單純用之前的教學文章會不知到在哪裡產生憑證，他已經移動到Network底下了 ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
目前我把Proxy架好了，看的是這篇教學文章-OWASP ZAP操作手冊，講的非常詳細
在Firefox中搜尋憑證或是cert，直接安裝在ZAP產生的憑證檔案 在Firefox的setting中搜尋Proxy ![圖片](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) 設定成如下 ![圖片](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) 只要ZAP有打開，就可以連線出去，但如果Proxy已經setup，卻沒有打開ZAP會通不到外面喔 補充 如果上述的步驟已經執行完但Proxy只能攔截到GET Method的封包，就代表憑證爛掉了，和在手機上一樣，但手機會出現這個問題還有可能是SSL Pinning，網頁端只需要重新安裝ZAP Generate的新憑證就好 如果設定Firefox的Proxy時，是設定成使用系統Proxy設定，那就要在電腦的設定中，更改Proxy的config ![圖片](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) 這樣的話ZAP也可以正常運作，但是就不會出現ZAP特定的畫面(功能) ![圖片](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) 只有設定成手動設定Proxy才會出現，否則會變成連線不上的畫面 How to use Burp Suite as Proxy? 這個完全是翻譯並且按照 Intercepting Android App Traffic with BurpSuite 的影片教學
Prepare (有取得Root實機的情況下) 如果要保險一點零失敗的達成目標，按照影片的步驟和環境比較好，如果是已經有一台取得Root的實機，就可以忽略用VMware開的Emulator
取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem 丟到手機端後直接在手機安裝憑證 接著就要參考How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?這篇文章下面註解的地方重新安裝AlwaysTrustUserCert.zip這個plugin，最保險的做法是 先把之前所有安裝的憑證刪除→ 重新啟動→ 重新安裝"所有"的憑證→ 重新安裝Magisk模組→ Reboot 接著就直接跳到下一段(實際攔截前) (利用VMware開Emulator) VMware 記得啟動 Virtualization 安裝Genymotion, virtualbox, adb 安裝前先到Genymotion官網註冊帳號 $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion 選擇Emulator的手機型號就可以開啟一個全新的Emulator 取得Burp Suite Cert(在開啟Burp Suite的前提下) 有關於DER和PEM的背景知識可以參考[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記 $ curl localhost:8080/cert -o cert.der # 這一段是強制把der檔案轉換成pem檔案 $ openssl x509 -inform der -in cert.der -out cert.pem # 這一段是顯示cert.pem這個檔案Subject的MD5 Hash Value，至於他怎麼做hash的，可以參考https://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713，他解釋該hash的標的為哪些，並不是針對這整個file做hash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # 複製cert.pem並改名成9a5ba575.0，會改成這樣是因為手機當中儲存憑證的方式就是這樣 $ cp cert.pem 9a5ba575.0 # 這一段是print出9a5ba575.0的subject，也就是上面做hash的標的就是下面這一串東西，所以只要是PortSwigger的憑證，只要他們沒有改subject，基本上做hash得到的結果都會是9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA 丟到手機端中儲存憑證的絕對位址 如果直接用adb push到該位置，會發現錯誤，原因是該位置是read only的狀態，所以我們要進到su進到root權限改變read only的狀態，再把東西丟進去就完成安裝了 $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ 實際攔截前 打開的Burp Suite一定要把Bind to address改成All interfaces ![圖片](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) 設定手機端的網路Proxy 這一部分就跟ZAP當初設定的時候一模一樣，當然也是可以像教學影片那樣用CLI的方式處理 $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy 接下來就可以實際攔截了 Bypass SSL Pinning by Frida 還記得之前做的實驗論文筆記中有提到，有一部分的app就算安裝了SSL Unpinning的Plugin還是無法攔截到流量，根據Defeating Android Certificate Pinning with Frida文章的說明，Facebook各式各樣的App所使用的憑證標準和實作方式都是自定義的，而不是用標準API，這樣的話用一般的SSL Unpinning就還是不會成功'><meta itemprop=wordCount content="771"><meta itemprop=keywords content="Problem Solution"><title>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site</title>
<link href=/fonts/fontawesome/css/fontawesome-all.min.css?1743619851 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1743619851 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1743619851 rel=stylesheet><link href=/css/theme.min.css?1743619851 rel=stylesheet><link href=/css/format-html.min.css?1743619851 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1743619851 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1743619851 defer></script><script src=/js/lunr/lunr.min.js?1743619851 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1743619851 defer></script><script src=/js/lunr/lunr.multi.min.js?1743619851 defer></script><script src=/js/lunr/lunr.en.min.js?1743619851 defer></script><script src=/js/search.min.js?1743619851 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://bernie6401.github.io",window.relearn.contentLangs=["en"],window.relearn.index_js_url="/searchindex.en.js?1743619851",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["auto"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#補充>補充</a></li></ul><ul><li><a href=#prepare>Prepare</a><ul><li><a href=#有取得root實機的情況下>(有取得Root實機的情況下)</a></li><li><a href=#利用vmware開emulator>(利用VMware開Emulator)</a></li></ul></li><li><a href=#實際攔截前>實際攔截前</a></li><li><a href=#bypass-ssl-pinning-by-frida>Bypass SSL Pinning by Frida</a></li><li><a href=#對比>對比</a><ul><li><a href=#沒有使用frida的時候>沒有使用Frida的時候</a></li><li><a href=#有使用frida的時候>有使用Frida的時候</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>SBK Hugo Site</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/problem-solutions/index.html><span itemprop=name>Problem Solutions</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html title="How to use VScode / Web Storm Debug JS? (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html title="MITMProxy相關問題整理 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable problem-solutions" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline><div class="R-taxonomy taxonomy-tags cstyle tags" title=Tags style=--VARIABLE-TAGS-BG-color:var(--INTERNAL-TAG-BG-color)><ul><li><a class=term-link href=/tags/problem-solution/index.html>Problem Solution</a></li></ul></div></header><h1 id=how-to-use-zapburp-suitemitmproxy-as-proxy-for-android>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</h1><h1 id=how-to-use-zap-as-proxy>How to use ZAP as Proxy?</h1><ul><li><p>根據<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>我大概知道怎麼使用，我們通常會使用zap的command line形式進行操作，詳細的參數可以參考<a href=https://www.zaproxy.org/docs/desktop/cmdline/ rel=external target=_blank>Official Document</a>，另外我看ZAP如果要當作Proxy的角色會需要用到ROOT CA憑證，所以如果單純用之前的教學文章會不知到在哪裡產生憑證，他已經移動到Network底下了
![image](<a href=https://hackmd.io/_uploads/B11DaMnpT.png rel=external target=_blank>https://hackmd.io/_uploads/B11DaMnpT.png</a> =400x)</p></li><li><p>目前我把Proxy架好了，看的是<a href=https://hackmd.io/@ZLgd0D1pQcyasZhkkWKG4g/HyFZFPDQu rel=external target=_blank>這篇教學文章-OWASP ZAP操作手冊</a>，講的非常詳細</p><ol><li>在Firefox中搜尋憑證或是cert，直接安裝在ZAP產生的憑證檔案</li><li>在Firefox的setting中搜尋Proxy
![圖片](<a href=https://hackmd.io/_uploads/HJ4NI5Aap.png rel=external target=_blank>https://hackmd.io/_uploads/HJ4NI5Aap.png</a> =400x)</li><li>設定成如下
![圖片](<a href=https://hackmd.io/_uploads/HJoGB9CTa.png rel=external target=_blank>https://hackmd.io/_uploads/HJoGB9CTa.png</a> =400x)
只要ZAP有打開，就可以連線出去，但如果Proxy已經setup，卻沒有打開ZAP會通不到外面喔</li></ol></li></ul><h2 id=補充>補充</h2><ol><li>如果上述的步驟已經執行完但Proxy只能攔截到GET Method的封包，就代表憑證爛掉了，和在手機上一樣，但手機會出現這個問題還有可能是SSL Pinning，網頁端只需要重新安裝ZAP Generate的新憑證就好</li><li>如果設定Firefox的Proxy時，是設定成<code>使用系統Proxy設定</code>，那就要在電腦的設定中，更改Proxy的config
![圖片](<a href=https://hackmd.io/_uploads/HJ6STMP1R.png rel=external target=_blank>https://hackmd.io/_uploads/HJ6STMP1R.png</a> =400x)
這樣的話ZAP也可以正常運作，但是就不會出現ZAP特定的畫面(功能)
![圖片](<a href=https://hackmd.io/_uploads/ByAxAfPyA.png rel=external target=_blank>https://hackmd.io/_uploads/ByAxAfPyA.png</a> =400x)
只有設定成<code>手動設定Proxy</code>才會出現，否則會變成連線不上的畫面
<a href=#R-image-8046875afb1131a4cb13cf7164eb4f8a class=lightbox-link><img alt=圖片 class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/B1vHRzPJ0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8046875afb1131a4cb13cf7164eb4f8a><img alt=圖片 class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/B1vHRzPJ0.png></a></li></ol><h1 id=how-to-use-burp-suite-as-proxy>How to use Burp Suite as Proxy?</h1><p>這個完全是翻譯並且按照<a href="https://youtu.be/xp8ufidc514?si=4y0JhxW0kbnO1HjF" rel=external target=_blank> Intercepting Android App Traffic with BurpSuite </a>的影片教學</p><h2 id=prepare>Prepare</h2><h3 id=有取得root實機的情況下>(有取得Root實機的情況下)</h3><p>如果要保險一點零失敗的達成目標，按照影片的步驟和環境比較好，如果是已經有一台取得Root的實機，就可以忽略用VMware開的Emulator</p><ul><li>取得Burp Suite Cert(在開啟Burp Suite的前提下)
有關於DER和PEM的背景知識可以參考<a href=https://medium.com/chouhsiang/%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AD%98-pem-%E8%88%87-der-dad659e0a40d rel=external target=_blank>[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記</a><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl localhost:8080/cert -o cert.der

# 這一段是強制把der檔案轉換成pem檔案
$ openssl x509 -inform der -in cert.der -out cert.pem</code></pre></div></li><li>丟到手機端後直接在手機安裝憑證</li><li>接著就要參考<a href=https://hackmd.io/nAJIgt13TjSZ5nqLR4-BiQ#Install-AlwaysTrustUserCertzip-Module rel=external target=_blank>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a>這篇文章下面註解的地方重新安裝AlwaysTrustUserCert.zip這個plugin，最保險的做法是
先把之前所有安裝的憑證刪除→
重新啟動→
重新安裝"所有"的憑證→
重新安裝Magisk模組→
Reboot
接著就直接跳到下一段(實際攔截前)</li></ul><h3 id=利用vmware開emulator>(利用VMware開Emulator)</h3><ul><li>VMware 記得啟動 Virtualization</li><li>安裝Genymotion, virtualbox, adb
安裝前先到Genymotion官網註冊帳號<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin
$ chmod +x genymotion-3.6.0-linux_x64.bin
$ ./genymotion-3.6.0-linux_x64.bin
$ sudo apt install virtualbox adb -y
$ cd genymotion
$ ./genymotion # login to genymotion</code></pre></div></li><li>選擇Emulator的手機型號就可以開啟一個全新的Emulator</li><li>取得Burp Suite Cert(在開啟Burp Suite的前提下)
有關於DER和PEM的背景知識可以參考<a href=https://medium.com/chouhsiang/%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AD%98-pem-%E8%88%87-der-dad659e0a40d rel=external target=_blank>[背景知識] 憑證的格式 PEM 與 DER | 自然人憑證開發筆記</a><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl localhost:8080/cert -o cert.der

# 這一段是強制把der檔案轉換成pem檔案
$ openssl x509 -inform der -in cert.der -out cert.pem

# 這一段是顯示cert.pem這個檔案Subject的MD5 Hash Value，至於他怎麼做hash的，可以參考https://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713，他解釋該hash的標的為哪些，並不是針對這整個file做hash
$ openssl x509 -inform PEM -subject_hash_old -in cert.pem
9a5ba575
-----BEGIN CERTIFICATE-----
MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML
UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0
U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln
Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda
Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE
CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ
b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv
cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2
OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni
2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9
0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4
DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd
JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq
bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3
DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu
zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH
ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN
EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68
kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x
PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo
-----END CERTIFICATE-----

# 複製cert.pem並改名成9a5ba575.0，會改成這樣是因為手機當中儲存憑證的方式就是這樣
$ cp cert.pem 9a5ba575.0

# 這一段是print出9a5ba575.0的subject，也就是上面做hash的標的就是下面這一串東西，所以只要是PortSwigger的憑證，只要他們沒有改subject，基本上做hash得到的結果都會是9a5ba575
$ openssl x509 -inform PEM -subject -in 9a5ba575.0
subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA</code></pre></div></li><li>丟到手機端中儲存憑證的絕對位址
如果直接用adb push到該位置，會發現錯誤，原因是該位置是read only的狀態，所以我們要進到su進到root權限改變read only的狀態，再把東西丟進去就完成安裝了<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell
# su
# mount -o remount,rw /
# exit
# exit
$ adb push 9a5ba575.0 /system/etc/security/cacerts/</code></pre></div></li></ul><h2 id=實際攔截前>實際攔截前</h2><ol><li>打開的Burp Suite一定要把Bind to address改成All interfaces
![圖片](<a href=https://hackmd.io/_uploads/B1HBnVVPR.png rel=external target=_blank>https://hackmd.io/_uploads/B1HBnVVPR.png</a> =400x)</li><li>設定手機端的網路Proxy
這一部分就跟ZAP當初設定的時候一模一樣，當然也是可以像教學影片那樣用CLI的方式處理<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell settings put global http_proxy &lt;proxy server ip&gt;:8080 # set phone proxy
$ adb shell settings put global http_proxy :0 # unset phone proxy</code></pre></div></li><li>接下來就可以實際攔截了</li></ol><h2 id=bypass-ssl-pinning-by-frida>Bypass SSL Pinning by Frida</h2><p>還記得之前做的實驗<a href=https://hackmd.io/@SBK6401/r155hduCT#%E7%84%A1%E6%B3%95%E4%BD%BF%E7%94%A8 rel=external target=_blank>論文筆記</a>中有提到，有一部分的app就算安裝了SSL Unpinning的Plugin還是無法攔截到流量，根據<a href=https://httptoolkit.com/blog/frida-certificate-pinning/ rel=external target=_blank>Defeating Android Certificate Pinning with Frida</a>文章的說明，Facebook各式各樣的App所使用的憑證標準和實作方式都是自定義的，而不是用標準API，這樣的話用一般的SSL Unpinning就還是不會成功</p><blockquote><p>Notably some apps which will go above and beyond, by implementing their own custom certificate pinning techniques from scratch, to make disabling it as difficult as possible. The prime example of this is the various Facebook apps, which all use their own custom reimplementation of TLS rather than the standard platform APIs.</p><p>It&rsquo;s definitely possible to automatically remove certificate pinning features from that too within the same Frida script in theory (contributions very welcome!), but it&rsquo;s significantly more difficult than mocking out a well-known common library, so I haven&rsquo;t done that yet, and so this script won&rsquo;t work for Facebook, Facebook Messenger, Instagram, or similar.</p></blockquote><p>所以通過上述教學影片，我們可以用Frida搭配特定App的腳本去Hook特定App中的特定Function，讓我們能夠在Proxy中攔截到流量</p><ol><li>安裝Frida-tools和Frida-server<div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ conda create --name proxy python<span style=color:#f92672>=</span>3.11 -y
</span></span><span style=display:flex><span>$ pip install frida-tools</span></span></code></pre></div>接著按照<a href=https://frida.re/docs/android/ rel=external target=_blank>官網</a>的說明安裝frida-server<ol><li>先從手機看架構
以我的Google Pixel 6a來說，架構是aarch64<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell uname -a
Linux localhost 5.10.157-android13-4-00001-g914e947b041d-ab10144456 #1 SMP PREEMPT Tue May 16 08:47:42 UTC 2023 aarch64 Toybox</code></pre></div></li><li>再到<a href=https://github.com/frida/frida/releases rel=external target=_blank>github releases</a>下載最新的server
此時我要選的版本就是frida-server-{version number}-android-arm64.xz
<a href=#R-image-af438d292e8731b7273c0d046b622144 class=lightbox-link><img alt=圖片 class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/S1S234ND0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-af438d292e8731b7273c0d046b622144><img alt=圖片 class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/S1S234ND0.png></a></li><li>解壓縮後放到手機端上並且啟動這個frida-server<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ mv frida-server-16.2.5-android-arm64 frida-server # rename it
$ adb push frida-server /data/local/tmp/
$ adb shell &#34;chmod 755 /data/local/tmp/frida-server&#34;
$ adb shell &#34;/data/local/tmp/frida-server &amp;&#34;</code></pre></div></li></ol></li><li>下載Instagram的腳本
同樣根據影片教學，到<a href="https://github.com/Eltion/Instagram-SSL-Pinning-Bypass?tab=readme-ov-file" rel=external target=_blank>Eltion/Instagram-SSL-Pinning-Bypass</a>下載最關鍵的.js script，他裡面還有其他的App Script，包含threads和messager之類的<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ wget https://raw.githubusercontent.com/Eltion/Instagram-SSL-Pinning-Bypass/main/instagram-ssl-pinning-bypass.js</code></pre></div></li><li>啟動Burp Suite和腳本
<strong>Run腳本之前把Instagram的App強制停止</strong><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ frida -U -l ./instagram-ssl-pinning-bypass.js -f com.instagram.android
     ____
    / _  |   Frida 16.2.1 - A world-class dynamic instrumentation toolkit
   | (_| |
    &gt; _  |   Commands:
   /_/ |_|       help      -&gt; Displays the help system
   . . . .       object?   -&gt; Display information about &#39;object&#39;
   . . . .       exit/quit -&gt; Exit
   . . . .
   . . . .   More info at https://frida.re/docs/home/
   . . . .
   . . . .   Connected to Pixel 6a (id=24121JEGR04513)
Spawning `com.instagram.android`...
[*][*] Waiting for libliger...
Spawned `com.instagram.android`. Resuming main thread!
[Pixel 6a::com.instagram.android ]-&gt; [*][+] Hooked checkTrustedRecursive
[*][+] Hooked SSLContextInit
[*][+] Found libliger at: 0x76a3404000
[*][+] Hooked function: _ZN8proxygen15SSLVerification17verifyWithMetricsEbP17x509_store_ctx_stRKNSt6__ndk112basic_stringIcNS3_11char_traitsIcEENS3_9allocatorIcEEEEPNS0_31SSLFailureVerificationCallbacksEPNS0_31SSLSuccessVerificationCallbacksERKNS_15TimeUtilGenericINS3_6chrono12steady_clockEEERNS_10TraceEventE</code></pre></div><code>-U</code>代表目標是USB連接的Device
<code>-l</code>代表要運行的Script
<code>-f</code>代表腳本的目標為何</li><li>查看Burp Suite
此時如果Burp Suite有開Intercept，並且App有送出一些東西，理論上都會被攔截到</li></ol><h2 id=對比>對比</h2><h3 id=沒有使用frida的時候>沒有使用Frida的時候</h3><p>會得到以下截圖
![Screenshot_20240523-101015](<a href=https://hackmd.io/_uploads/Bk7aFN37R.png#pic_center rel=external target=_blank>https://hackmd.io/_uploads/Bk7aFN37R.png#pic_center</a> =200x)
並且Burp Suite沒有得到任何關於instagram的封包</p><h3 id=有使用frida的時候>有使用Frida的時候</h3><p>例如我在前面的登入介面輸入一些東西，可以在封包紀錄中找到我輸入的Username和Password
![Screenshot_20240523-120440](<a href=https://hackmd.io/_uploads/H1-tlBhXR.png rel=external target=_blank>https://hackmd.io/_uploads/H1-tlBhXR.png</a> =200x)
可以在傳輸的封包中找到這個json parameter body，而我輸入的Username: testqqqqqqwwwwww也的確在其中
<a href=#R-image-db0b9dd41fedbc9e52c005b2b243767f class=lightbox-link><img alt=圖片 class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/SygolHnm0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-db0b9dd41fedbc9e52c005b2b243767f><img alt=圖片 class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/SygolHnm0.png></a></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-jsonld data-lang=jsonld>{
  &#34;client_input_params&#34;: {
    &#34;device_id&#34;: &#34;android-70ea1739c3d78fb5&#34;,
    &#34;login_attempt_count&#34;: 1,
    &#34;secure_family_device_id&#34;: &#34;&#34;,
    &#34;machine_id&#34;: &#34;Zk6_IgABAAFG881bw25QVFTkQhJH&#34;,
    &#34;accounts_list&#34;: [],
    &#34;auth_secure_device_id&#34;: &#34;&#34;,
    &#34;has_whatsapp_installed&#34;: 0,
    &#34;password&#34;: &#34;#PWD_INSTAGRAM:1:1716436802:ASkUVtbquYjqR+MxW5sAAQJv9IFYeA7RM5r8OEvSkEDf6+0YsJ0oKKAkfx7o9AM5hpZW1TQV6POf1fg8uLC1E+gCgyqCwZiyCHYgqO3XDol2g2HFrwpNMwMn1S15LGjT9i8TEfh+k8hPuNFwGkEpLll6ycMur34gdx2V0vewuHlDOZapFmVetj+odQVW0u4WLwJybvKcFMdGGYWH7BqhmSsMjCFOBPzeflgf5fHQdxV14NWekpCWHED3LVwdISxa/yHvaYoc1EICz/O3wJO56aU3Y2zNQttBxKxuhCeS59sexNwaiz10hFMe9mb/0BD158z5Nn9x+3b5XDy24v3mNNHA4F6jkdiGwy8pAI0a/4X+yiOt5bVOCsinfGbso22kC6YnYq8dbBlUHD5zKTlKow8E&#34;,
    &#34;sso_token_map_json_string&#34;: &#34;&#34;,
    &#34;family_device_id&#34;: &#34;23045e76-6a5c-4886-8eca-0936fdb5f76b&#34;,
    &#34;fb_ig_device_id&#34;: [],
    &#34;device_emails&#34;: [],
    &#34;try_num&#34;: 1,
    &#34;lois_settings&#34;: {
      &#34;lois_token&#34;: &#34;&#34;,
      &#34;lara_override&#34;: &#34;&#34;
    },
    &#34;event_flow&#34;: &#34;login_manual&#34;,
    &#34;event_step&#34;: &#34;home_page&#34;,
    &#34;headers_infra_flow_id&#34;: &#34;&#34;,
    &#34;openid_tokens&#34;: {},
    &#34;client_known_key_hash&#34;: &#34;&#34;,
    &#34;contact_point&#34;: &#34;testqqqqqqwwwwww&#34;,
    &#34;encrypted_msisdn&#34;: &#34;&#34;
  },
  &#34;server_params&#34;: {
    &#34;should_trigger_override_login_2fa_action&#34;: 0,
    &#34;is_from_logged_out&#34;: 0,
    &#34;should_trigger_override_login_success_action&#34;: 0,
    &#34;login_credential_type&#34;: &#34;none&#34;,
    &#34;server_login_source&#34;: &#34;login&#34;,
    &#34;waterfall_id&#34;: null,
    &#34;login_source&#34;: &#34;Login&#34;,
    &#34;is_platform_login&#34;: 0,
    &#34;INTERNAL__latency_qpl_marker_id&#34;: 36707139,
    &#34;offline_experiment_group&#34;: null,
    &#34;is_from_landing_page&#34;: 0,
    &#34;password_text_input_id&#34;: &#34;0:96&#34;,
    &#34;ar_event_source&#34;: &#34;login_home_page&#34;,
    &#34;username_text_input_id&#34;: &#34;0:95&#34;,
    &#34;layered_homepage_experiment_group&#34;: null,
    &#34;should_show_nested_nta_from_aymh&#34;: 1,
    &#34;device_id&#34;: null,
    &#34;INTERNAL__latency_qpl_instance_id&#34;: 217,
    &#34;reg_flow_source&#34;: &#34;cacheable_aymh_screen&#34;,
    &#34;is_caa_perf_enabled&#34;: 1,
    &#34;credential_type&#34;: &#34;password&#34;,
    &#34;caller&#34;: &#34;gslr&#34;,
    &#34;family_device_id&#34;: null,
    &#34;INTERNAL_INFRA_THEME&#34;: &#34;harm_f&#34;,
    &#34;is_from_logged_in_switcher&#34;: 0
  }
}</code></pre></div><h1 id=how-to-use-mitmproxy-as-proxy>How to use mitmproxy as Proxy?</h1><p>這有點小複雜，我看網路上的教學有時候都東漏西漏，</p><ol><li>安裝mitmrproxy
我是直接用<code>$ pip install mitmproxy</code>，並且直接run起來，<code>$ mitmweb</code></li><li>下載憑證
如果一開始拿到的手機就是已經Rooted，那就直接下載憑證就好，我是用電腦版下載，首先把電腦上的proxy設定起來
![圖片](<a href=https://hackmd.io/_uploads/HJ5drE4wC.png rel=external target=_blank>https://hackmd.io/_uploads/HJ5drE4wC.png</a> =300x)
並且在瀏覽器上打 <a href=http://mitm.it rel=external target=_blank>http://mitm.it</a> 然後就會看到以下畫面
![圖片](<a href=https://hackmd.io/_uploads/Bk-cINNP0.png rel=external target=_blank>https://hackmd.io/_uploads/Bk-cINNP0.png</a> =300x)
如果沒有先設定電腦上的proxy，他預設並不會走mitmproxy，這時候再瀏覽同一個網站就會出現以下畫面
<a href=#R-image-614af3642238bf09b562e8967ce7cfdf class=lightbox-link><img alt=圖片 class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/H1dmI4NPC.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-614af3642238bf09b562e8967ce7cfdf><img alt=圖片 class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/H1dmI4NPC.png></a>
這時我們們就可以直接選取android要得憑證</li><li>把憑證放到手機上並且依照<a href=https://hackmd.io/@SBK6401/r1pDCcqCT#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85 rel=external target=_blank>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a>中最後的注意事項進行安裝，也就是先把之前所有安裝的憑證刪除→重新啟動→重新安裝"所有"的憑證→重新安裝Magisk模組→Reboot，就可以了
此時檢查手機中的的Trusted credentials應該就會發現mitmproxy的憑證已經被信任
![Screenshot_20240704-225258](<a href=https://hackmd.io/_uploads/B1v_PE4vC.png rel=external target=_blank>https://hackmd.io/_uploads/B1v_PE4vC.png</a> =200x)</li><li>設定手機的Proxy IP
我是直接用電腦的hot spot來測試，所以手機就填電腦IP和8080的Port</li><li>攔截流量
此時一切幾乎準備就緒，但有個小問題，如果按照前面的command，會一直出現以下問題
![圖片](<a href=https://hackmd.io/_uploads/r1Huu44PA.png rel=external target=_blank>https://hackmd.io/_uploads/r1Huu44PA.png</a> =400x)
根據<a href=https://stackoverflow.com/questions/52068746/mitmproxy-client-connection-killed-by-block-global rel=external target=_blank>Stackoverflow</a>的說明，我們可以加上set參數<div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mitmweb --set block_global<span style=color:#f92672>=</span>false --set view</span></span></code></pre></div>就可以順利攔截到流量了
<a href=#R-image-7d4f281310c95be6755a051e725a49d8 class=lightbox-link><img alt=圖片 class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/SkYGtVEwA.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7d4f281310c95be6755a051e725a49d8><img alt=圖片 class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/SkYGtVEwA.png></a></li></ol><h1 id=reference>Reference</h1><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.tpisoftware.com/tpu/articleDetails/2161 rel=external target=_blank>網頁安全性測試：OWASP ZAP使用入門</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo class=R-default href=/index.html><div class=logo-title>SBK Hugo Site</div></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li data-nav-id=/index.html><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/books-notes/index.html><a class=padding href=/books-notes/index.html>Books Notes</a><ul id=R-subsections-0771445a148f63eb6cc1a9b7ad45a36a class=collapsible-menu></ul></li><li data-nav-id=/data-structure/index.html><a class=padding href=/data-structure/index.html>Data Structures</a><ul id=R-subsections-58892abc7cea06bf1839098c82b3eb4d class=collapsible-menu></ul></li><li data-nav-id=/job/index.html><a class=padding href=/job/index.html>Jobs</a><ul id=R-subsections-0fce2c1f4d6d23f49b605855a82f55aa class=collapsible-menu></ul></li><li data-nav-id=/knowledge/index.html><a class=padding href=/knowledge/index.html>Knowledges</a><ul id=R-subsections-0bdb754d722e03f187f2117c1ef8015d class=collapsible-menu></ul></li><li data-nav-id=/leetcode/index.html><a class=padding href=/leetcode/index.html>LeetCodes</a><ul id=R-subsections-76e85062179d09303530c47eb73fc667 class=collapsible-menu></ul></li><li class=parent data-nav-id=/problem-solutions/index.html><a class=padding href=/problem-solutions/index.html>Problem Solutions</a><ul id=R-subsections-4f9e0f3095337026c1723515d5409f89 class=collapsible-menu><li data-nav-id=/problem-solutions/_wp-admin-vs-_wp-content-vs-_wp-include-vs-_wp-json/index.html><a class=padding href=/problem-solutions/_wp-admin-vs-_wp-content-vs-_wp-include-vs-_wp-json/index.html>/wp-admin VS /wp-content VS /wp-include VS /wp-json</a></li><li data-nav-id=/problem-solutions/sudo-chmod-777--r-_usr-problem/index.html><a class=padding href=/problem-solutions/sudo-chmod-777--r-_usr-problem/index.html>`sudo chmod 777 -R /usr` Problem</a></li><li data-nav-id=/problem-solutions/~_.zshrc--initial-library/index.html><a class=padding href=/problem-solutions/~_.zshrc--initial-library/index.html>~/.zshrc & Initial Library</a></li><li data-nav-id=/problem-solutions/createprocessentrycommon_586_-create-process-not-expected-to-return/index.html><a class=padding href=/problem-solutions/createprocessentrycommon_586_-create-process-not-expected-to-return/index.html>CreateProcessEntryCommon:586: Create process not expected to return</a></li><li data-nav-id=/problem-solutions/endnote---invalid-citation/index.html><a class=padding href=/problem-solutions/endnote---invalid-citation/index.html>Endnote - Invalid Citation</a></li><li data-nav-id=/problem-solutions/fatal_-authentication-failed-for-https___github.com_username_repository.git_/index.html><a class=padding href=/problem-solutions/fatal_-authentication-failed-for-https___github.com_username_repository.git_/index.html>fatal: Authentication failed for `'https://github.com/{username}/{repository}.git/'`</a></li><li data-nav-id=/problem-solutions/git-large-file-error---solution/index.html><a class=padding href=/problem-solutions/git-large-file-error---solution/index.html>Git Large File Error - Solution</a></li><li data-nav-id=/problem-solutions/how-how-to-use-mailgun_resend-as-smtp-server_/index.html><a class=padding href=/problem-solutions/how-how-to-use-mailgun_resend-as-smtp-server_/index.html>How How to use Mailgun/Resend as SMTP server?</a></li><li data-nav-id=/problem-solutions/how-to-address-docker-compose-not-found_/index.html><a class=padding href=/problem-solutions/how-to-address-docker-compose-not-found_/index.html>How to address docker compose not found?</a></li><li data-nav-id=/problem-solutions/how-to-adjust-endnotes-paragraph-in-word_/index.html><a class=padding href=/problem-solutions/how-to-adjust-endnotes-paragraph-in-word_/index.html>How to adjust Endnote's Paragraph in Word?</a></li><li data-nav-id=/problem-solutions/how-to-build-apk-file-on-react-native-project_/index.html><a class=padding href=/problem-solutions/how-to-build-apk-file-on-react-native-project_/index.html>How to build apk file on React-Native Project?</a></li><li data-nav-id=/problem-solutions/how-to-check-if-the-paper-is-top-conference-or-q1-journal_/index.html><a class=padding href=/problem-solutions/how-to-check-if-the-paper-is-top-conference-or-q1-journal_/index.html>How to check if the paper is Top Conference or Q1 Journal?</a></li><li data-nav-id=/problem-solutions/how-to-download-blob-videos_/index.html><a class=padding href=/problem-solutions/how-to-download-blob-videos_/index.html>How to download blob videos?</a></li><li data-nav-id=/problem-solutions/how-to-install-aab-file_/index.html><a class=padding href=/problem-solutions/how-to-install-aab-file_/index.html>How to install aab file?</a></li><li data-nav-id=/problem-solutions/how-to-install-logontracer_/index.html><a class=padding href=/problem-solutions/how-to-install-logontracer_/index.html>How to install LogonTracer?</a></li><li data-nav-id=/problem-solutions/how-to-root-android-phone--install-alwaystrustusercert.zip-module_/index.html><a class=padding href=/problem-solutions/how-to-root-android-phone--install-alwaystrustusercert.zip-module_/index.html>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a></li><li data-nav-id=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html><a class=padding href=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html>How to use VScode / Web Storm Debug JS?</a></li><li class=active data-nav-id=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html><a class=padding href=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</a></li><li data-nav-id=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html><a class=padding href=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html>MITMProxy相關問題整理</a></li><li data-nav-id=/problem-solutions/problems-about-multiprocess/index.html><a class=padding href=/problem-solutions/problems-about-multiprocess/index.html>Problems About Multiprocess</a></li><li data-nav-id=/problem-solutions/pwndbg-installation-problems/index.html><a class=padding href=/problem-solutions/pwndbg-installation-problems/index.html>pwndbg installation problems</a></li><li data-nav-id=/problem-solutions/react-native---error-resolving-plugin-id_-com.facebook.react.settings/index.html><a class=padding href=/problem-solutions/react-native---error-resolving-plugin-id_-com.facebook.react.settings/index.html>React Native - Error resolving plugin [id: 'com.facebook.react.settings']</a></li><li data-nav-id=/problem-solutions/uiautomatorviewer-%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html><a class=padding href=/problem-solutions/uiautomatorviewer-%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html>UiAutomatorViewer 常見問題整理</a></li><li data-nav-id=/problem-solutions/unexpected-fatal-error-while-initializing-python-runtime_/index.html><a class=padding href=/problem-solutions/unexpected-fatal-error-while-initializing-python-runtime_/index.html>Unexpected fatal error while initializing python runtime.</a></li><li data-nav-id=/problem-solutions/virtualbox%E6%BB%91%E9%BC%A0%E7%84%A1%E6%B3%95%E8%B7%B3%E5%87%BA/index.html><a class=padding href=/problem-solutions/virtualbox%E6%BB%91%E9%BC%A0%E7%84%A1%E6%B3%95%E8%B7%B3%E5%87%BA/index.html>VirtualBox滑鼠無法跳出</a></li><li data-nav-id=/problem-solutions/wsl-tty-_dev_tty0/index.html><a class=padding href=/problem-solutions/wsl-tty-_dev_tty0/index.html>WSL tty /dev/tty0</a></li><li data-nav-id=/problem-solutions/wsl2-cannot-list-android-devices/index.html><a class=padding href=/problem-solutions/wsl2-cannot-list-android-devices/index.html>WSL2 Cannot List Android Devices</a></li><li data-nav-id=/problem-solutions/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hugo+github%E6%9E%B6%E8%A8%AD%E7%B6%B2%E7%AB%99/index.html><a class=padding href=/problem-solutions/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hugo+github%E6%9E%B6%E8%A8%AD%E7%B6%B2%E7%AB%99/index.html>如何使用Hugo+Github架設網站</a></li></ul></li><li data-nav-id=/security/index.html><a class=padding href=/security/index.html>Securities</a><ul id=R-subsections-66815ecaaecfc1c209e5637d03b258b2 class=collapsible-menu></ul></li><li data-nav-id=/side-project/index.html><a class=padding href=/side-project/index.html>Side Projects</a><ul id=R-subsections-3295de6e89859c4cf23a4292e734c881 class=collapsible-menu></ul></li><li data-nav-id=/survey-papers/index.html><a class=padding href=/survey-papers/index.html>Survey Papers</a><ul id=R-subsections-baa5a308e222e800d6e93248dad73a11 class=collapsible-menu></ul></li><li data-nav-id=/terminology/index.html><a class=padding href=/terminology/index.html>Terminologies</a><ul id=R-subsections-a19bf87a9a9aaf0a4146b803a35492f8 class=collapsible-menu></ul></li><li data-nav-id=/toc/index.html><a class=padding href=/toc/index.html>TOCs</a><ul id=R-subsections-451d3779340ac1afa8683c0232808cbf class=collapsible-menu></ul></li><li data-nav-id=/tools/index.html><a class=padding href=/tools/index.html>Tools</a><ul id=R-subsections-bf1399820dde3dd110e03ace4147ff86 class=collapsible-menu></ul></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1743619851 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1743619851 defer></script><script src=/js/theme.min.js?1743619851 defer></script></body></html>