<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.6.0+b932d301d7838f3c1a50e318e216b55ce5cc9148"><meta name=description content='How to use ZAP as Proxy? æ ¹æ“š1æˆ‘å¤§æ¦‚çŸ¥é“æ€éº¼ä½¿ç”¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨zapçš„command lineå½¢å¼é€²è¡Œæ“ä½œï¼Œè©³ç´°çš„åƒæ•¸å¯ä»¥åƒè€ƒOfficial Documentï¼Œå¦å¤–æˆ‘çœ‹ZAPå¦‚æœè¦ç•¶ä½œProxyçš„è§’è‰²æœƒéœ€è¦ç”¨åˆ°ROOT CAæ†‘è­‰ï¼Œæ‰€ä»¥å¦‚æœå–®ç´”ç”¨ä¹‹å‰çš„æ•™å­¸æ–‡ç« æœƒä¸çŸ¥åˆ°åœ¨å“ªè£¡ç”¢ç”Ÿæ†‘è­‰ï¼Œä»–å·²ç¶“ç§»å‹•åˆ°Networkåº•ä¸‹äº† ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
ç›®å‰æˆ‘æŠŠProxyæ¶å¥½äº†ï¼Œçœ‹çš„æ˜¯é€™ç¯‡æ•™å­¸æ–‡ç« -OWASP ZAPæ“ä½œæ‰‹å†Šï¼Œè¬›çš„éå¸¸è©³ç´°
åœ¨Firefoxä¸­æœå°‹æ†‘è­‰æˆ–æ˜¯certï¼Œç›´æ¥å®‰è£åœ¨ZAPç”¢ç”Ÿçš„æ†‘è­‰æª”æ¡ˆ åœ¨Firefoxçš„settingä¸­æœå°‹Proxy ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) è¨­å®šæˆå¦‚ä¸‹ ![åœ–ç‰‡](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) åªè¦ZAPæœ‰æ‰“é–‹ï¼Œå°±å¯ä»¥é€£ç·šå‡ºå»ï¼Œä½†å¦‚æœProxyå·²ç¶“setupï¼Œå»æ²’æœ‰æ‰“é–‹ZAPæœƒé€šä¸åˆ°å¤–é¢å–” è£œå…… å¦‚æœä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“åŸ·è¡Œå®Œä½†Proxyåªèƒ½æ””æˆªåˆ°GET Methodçš„å°åŒ…ï¼Œå°±ä»£è¡¨æ†‘è­‰çˆ›æ‰äº†ï¼Œå’Œåœ¨æ‰‹æ©Ÿä¸Šä¸€æ¨£ï¼Œä½†æ‰‹æ©Ÿæœƒå‡ºç¾é€™å€‹å•é¡Œé‚„æœ‰å¯èƒ½æ˜¯SSL Pinningï¼Œç¶²é ç«¯åªéœ€è¦é‡æ–°å®‰è£ZAP Generateçš„æ–°æ†‘è­‰å°±å¥½ å¦‚æœè¨­å®šFirefoxçš„Proxyæ™‚ï¼Œæ˜¯è¨­å®šæˆä½¿ç”¨ç³»çµ±Proxyè¨­å®šï¼Œé‚£å°±è¦åœ¨é›»è…¦çš„è¨­å®šä¸­ï¼Œæ›´æ”¹Proxyçš„config ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) é€™æ¨£çš„è©±ZAPä¹Ÿå¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†æ˜¯å°±ä¸æœƒå‡ºç¾ZAPç‰¹å®šçš„ç•«é¢(åŠŸèƒ½) ![åœ–ç‰‡](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) åªæœ‰è¨­å®šæˆæ‰‹å‹•è¨­å®šProxyæ‰æœƒå‡ºç¾ï¼Œå¦å‰‡æœƒè®Šæˆé€£ç·šä¸ä¸Šçš„ç•«é¢ How to use Burp Suite as Proxy? é€™å€‹å®Œå…¨æ˜¯ç¿»è­¯ä¸¦ä¸”æŒ‰ç…§ Intercepting Android App Traffic with BurpSuite çš„å½±ç‰‡æ•™å­¸
Prepare (æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹) å¦‚æœè¦ä¿éšªä¸€é»é›¶å¤±æ•—çš„é”æˆç›®æ¨™ï¼ŒæŒ‰ç…§å½±ç‰‡çš„æ­¥é©Ÿå’Œç’°å¢ƒæ¯”è¼ƒå¥½ï¼Œå¦‚æœæ˜¯å·²ç¶“æœ‰ä¸€å°å–å¾—Rootçš„å¯¦æ©Ÿï¼Œå°±å¯ä»¥å¿½ç•¥ç”¨VMwareé–‹çš„Emulator
å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯å¾Œç›´æ¥åœ¨æ‰‹æ©Ÿå®‰è£æ†‘è­‰ æ¥è‘—å°±è¦åƒè€ƒHow to Root Android Phone & Install AlwaysTrustUserCert.zip Module?é€™ç¯‡æ–‡ç« ä¸‹é¢è¨»è§£çš„åœ°æ–¹é‡æ–°å®‰è£AlwaysTrustUserCert.zipé€™å€‹pluginï¼Œæœ€ä¿éšªçš„åšæ³•æ˜¯ å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’ é‡æ–°å•Ÿå‹•â†’ é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’ é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’ Reboot æ¥è‘—å°±ç›´æ¥è·³åˆ°ä¸‹ä¸€æ®µ(å¯¦éš›æ””æˆªå‰) (åˆ©ç”¨VMwareé–‹Emulator) VMware è¨˜å¾—å•Ÿå‹• Virtualization å®‰è£Genymotion, virtualbox, adb å®‰è£å‰å…ˆåˆ°Genymotionå®˜ç¶²è¨»å†Šå¸³è™Ÿ $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion é¸æ“‡Emulatorçš„æ‰‹æ©Ÿå‹è™Ÿå°±å¯ä»¥é–‹å•Ÿä¸€å€‹å…¨æ–°çš„Emulator å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem # é€™ä¸€æ®µæ˜¯é¡¯ç¤ºcert.pemé€™å€‹æª”æ¡ˆSubjectçš„MD5 Hash Valueï¼Œè‡³æ–¼ä»–æ€éº¼åšhashçš„ï¼Œå¯ä»¥åƒè€ƒhttps://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713ï¼Œä»–è§£é‡‹è©²hashçš„æ¨™çš„ç‚ºå“ªäº›ï¼Œä¸¦ä¸æ˜¯é‡å°é€™æ•´å€‹fileåšhash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # è¤‡è£½cert.pemä¸¦æ”¹åæˆ9a5ba575.0ï¼Œæœƒæ”¹æˆé€™æ¨£æ˜¯å› ç‚ºæ‰‹æ©Ÿç•¶ä¸­å„²å­˜æ†‘è­‰çš„æ–¹å¼å°±æ˜¯é€™æ¨£ $ cp cert.pem 9a5ba575.0 # é€™ä¸€æ®µæ˜¯printå‡º9a5ba575.0çš„subjectï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åšhashçš„æ¨™çš„å°±æ˜¯ä¸‹é¢é€™ä¸€ä¸²æ±è¥¿ï¼Œæ‰€ä»¥åªè¦æ˜¯PortSwiggerçš„æ†‘è­‰ï¼Œåªè¦ä»–å€‘æ²’æœ‰æ”¹subjectï¼ŒåŸºæœ¬ä¸Šåšhashå¾—åˆ°çš„çµæœéƒ½æœƒæ˜¯9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯ä¸­å„²å­˜æ†‘è­‰çš„çµ•å°ä½å€ å¦‚æœç›´æ¥ç”¨adb pushåˆ°è©²ä½ç½®ï¼Œæœƒç™¼ç¾éŒ¯èª¤ï¼ŒåŸå› æ˜¯è©²ä½ç½®æ˜¯read onlyçš„ç‹€æ…‹ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€²åˆ°sué€²åˆ°rootæ¬Šé™æ”¹è®Šread onlyçš„ç‹€æ…‹ï¼Œå†æŠŠæ±è¥¿ä¸Ÿé€²å»å°±å®Œæˆå®‰è£äº† $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ å¯¦éš›æ””æˆªå‰ æ‰“é–‹çš„Burp Suiteä¸€å®šè¦æŠŠBind to addressæ”¹æˆAll interfaces ![åœ–ç‰‡](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) è¨­å®šæ‰‹æ©Ÿç«¯çš„ç¶²è·¯Proxy é€™ä¸€éƒ¨åˆ†å°±è·ŸZAPç•¶åˆè¨­å®šçš„æ™‚å€™ä¸€æ¨¡ä¸€æ¨£ï¼Œç•¶ç„¶ä¹Ÿæ˜¯å¯ä»¥åƒæ•™å­¸å½±ç‰‡é‚£æ¨£ç”¨CLIçš„æ–¹å¼è™•ç† $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy æ¥ä¸‹ä¾†å°±å¯ä»¥å¯¦éš›æ””æˆªäº† Bypass SSL Pinning by Frida é‚„è¨˜å¾—ä¹‹å‰åšçš„å¯¦é©—è«–æ–‡ç­†è¨˜ä¸­æœ‰æåˆ°ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„appå°±ç®—å®‰è£äº†SSL Unpinningçš„Pluginé‚„æ˜¯ç„¡æ³•æ””æˆªåˆ°æµé‡ï¼Œæ ¹æ“šDefeating Android Certificate Pinning with Fridaæ–‡ç« çš„èªªæ˜ï¼ŒFacebookå„å¼å„æ¨£çš„Appæ‰€ä½¿ç”¨çš„æ†‘è­‰æ¨™æº–å’Œå¯¦ä½œæ–¹å¼éƒ½æ˜¯è‡ªå®šç¾©çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¨™æº–APIï¼Œé€™æ¨£çš„è©±ç”¨ä¸€èˆ¬çš„SSL Unpinningå°±é‚„æ˜¯ä¸æœƒæˆåŠŸ'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta name=twitter:description content='How to use ZAP as Proxy? æ ¹æ“š1æˆ‘å¤§æ¦‚çŸ¥é“æ€éº¼ä½¿ç”¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨zapçš„command lineå½¢å¼é€²è¡Œæ“ä½œï¼Œè©³ç´°çš„åƒæ•¸å¯ä»¥åƒè€ƒOfficial Documentï¼Œå¦å¤–æˆ‘çœ‹ZAPå¦‚æœè¦ç•¶ä½œProxyçš„è§’è‰²æœƒéœ€è¦ç”¨åˆ°ROOT CAæ†‘è­‰ï¼Œæ‰€ä»¥å¦‚æœå–®ç´”ç”¨ä¹‹å‰çš„æ•™å­¸æ–‡ç« æœƒä¸çŸ¥åˆ°åœ¨å“ªè£¡ç”¢ç”Ÿæ†‘è­‰ï¼Œä»–å·²ç¶“ç§»å‹•åˆ°Networkåº•ä¸‹äº† ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
ç›®å‰æˆ‘æŠŠProxyæ¶å¥½äº†ï¼Œçœ‹çš„æ˜¯é€™ç¯‡æ•™å­¸æ–‡ç« -OWASP ZAPæ“ä½œæ‰‹å†Šï¼Œè¬›çš„éå¸¸è©³ç´°
åœ¨Firefoxä¸­æœå°‹æ†‘è­‰æˆ–æ˜¯certï¼Œç›´æ¥å®‰è£åœ¨ZAPç”¢ç”Ÿçš„æ†‘è­‰æª”æ¡ˆ åœ¨Firefoxçš„settingä¸­æœå°‹Proxy ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) è¨­å®šæˆå¦‚ä¸‹ ![åœ–ç‰‡](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) åªè¦ZAPæœ‰æ‰“é–‹ï¼Œå°±å¯ä»¥é€£ç·šå‡ºå»ï¼Œä½†å¦‚æœProxyå·²ç¶“setupï¼Œå»æ²’æœ‰æ‰“é–‹ZAPæœƒé€šä¸åˆ°å¤–é¢å–” è£œå…… å¦‚æœä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“åŸ·è¡Œå®Œä½†Proxyåªèƒ½æ””æˆªåˆ°GET Methodçš„å°åŒ…ï¼Œå°±ä»£è¡¨æ†‘è­‰çˆ›æ‰äº†ï¼Œå’Œåœ¨æ‰‹æ©Ÿä¸Šä¸€æ¨£ï¼Œä½†æ‰‹æ©Ÿæœƒå‡ºç¾é€™å€‹å•é¡Œé‚„æœ‰å¯èƒ½æ˜¯SSL Pinningï¼Œç¶²é ç«¯åªéœ€è¦é‡æ–°å®‰è£ZAP Generateçš„æ–°æ†‘è­‰å°±å¥½ å¦‚æœè¨­å®šFirefoxçš„Proxyæ™‚ï¼Œæ˜¯è¨­å®šæˆä½¿ç”¨ç³»çµ±Proxyè¨­å®šï¼Œé‚£å°±è¦åœ¨é›»è…¦çš„è¨­å®šä¸­ï¼Œæ›´æ”¹Proxyçš„config ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) é€™æ¨£çš„è©±ZAPä¹Ÿå¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†æ˜¯å°±ä¸æœƒå‡ºç¾ZAPç‰¹å®šçš„ç•«é¢(åŠŸèƒ½) ![åœ–ç‰‡](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) åªæœ‰è¨­å®šæˆæ‰‹å‹•è¨­å®šProxyæ‰æœƒå‡ºç¾ï¼Œå¦å‰‡æœƒè®Šæˆé€£ç·šä¸ä¸Šçš„ç•«é¢ How to use Burp Suite as Proxy? é€™å€‹å®Œå…¨æ˜¯ç¿»è­¯ä¸¦ä¸”æŒ‰ç…§ Intercepting Android App Traffic with BurpSuite çš„å½±ç‰‡æ•™å­¸
Prepare (æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹) å¦‚æœè¦ä¿éšªä¸€é»é›¶å¤±æ•—çš„é”æˆç›®æ¨™ï¼ŒæŒ‰ç…§å½±ç‰‡çš„æ­¥é©Ÿå’Œç’°å¢ƒæ¯”è¼ƒå¥½ï¼Œå¦‚æœæ˜¯å·²ç¶“æœ‰ä¸€å°å–å¾—Rootçš„å¯¦æ©Ÿï¼Œå°±å¯ä»¥å¿½ç•¥ç”¨VMwareé–‹çš„Emulator
å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯å¾Œç›´æ¥åœ¨æ‰‹æ©Ÿå®‰è£æ†‘è­‰ æ¥è‘—å°±è¦åƒè€ƒHow to Root Android Phone & Install AlwaysTrustUserCert.zip Module?é€™ç¯‡æ–‡ç« ä¸‹é¢è¨»è§£çš„åœ°æ–¹é‡æ–°å®‰è£AlwaysTrustUserCert.zipé€™å€‹pluginï¼Œæœ€ä¿éšªçš„åšæ³•æ˜¯ å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’ é‡æ–°å•Ÿå‹•â†’ é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’ é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’ Reboot æ¥è‘—å°±ç›´æ¥è·³åˆ°ä¸‹ä¸€æ®µ(å¯¦éš›æ””æˆªå‰) (åˆ©ç”¨VMwareé–‹Emulator) VMware è¨˜å¾—å•Ÿå‹• Virtualization å®‰è£Genymotion, virtualbox, adb å®‰è£å‰å…ˆåˆ°Genymotionå®˜ç¶²è¨»å†Šå¸³è™Ÿ $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion é¸æ“‡Emulatorçš„æ‰‹æ©Ÿå‹è™Ÿå°±å¯ä»¥é–‹å•Ÿä¸€å€‹å…¨æ–°çš„Emulator å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem # é€™ä¸€æ®µæ˜¯é¡¯ç¤ºcert.pemé€™å€‹æª”æ¡ˆSubjectçš„MD5 Hash Valueï¼Œè‡³æ–¼ä»–æ€éº¼åšhashçš„ï¼Œå¯ä»¥åƒè€ƒhttps://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713ï¼Œä»–è§£é‡‹è©²hashçš„æ¨™çš„ç‚ºå“ªäº›ï¼Œä¸¦ä¸æ˜¯é‡å°é€™æ•´å€‹fileåšhash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # è¤‡è£½cert.pemä¸¦æ”¹åæˆ9a5ba575.0ï¼Œæœƒæ”¹æˆé€™æ¨£æ˜¯å› ç‚ºæ‰‹æ©Ÿç•¶ä¸­å„²å­˜æ†‘è­‰çš„æ–¹å¼å°±æ˜¯é€™æ¨£ $ cp cert.pem 9a5ba575.0 # é€™ä¸€æ®µæ˜¯printå‡º9a5ba575.0çš„subjectï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åšhashçš„æ¨™çš„å°±æ˜¯ä¸‹é¢é€™ä¸€ä¸²æ±è¥¿ï¼Œæ‰€ä»¥åªè¦æ˜¯PortSwiggerçš„æ†‘è­‰ï¼Œåªè¦ä»–å€‘æ²’æœ‰æ”¹subjectï¼ŒåŸºæœ¬ä¸Šåšhashå¾—åˆ°çš„çµæœéƒ½æœƒæ˜¯9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯ä¸­å„²å­˜æ†‘è­‰çš„çµ•å°ä½å€ å¦‚æœç›´æ¥ç”¨adb pushåˆ°è©²ä½ç½®ï¼Œæœƒç™¼ç¾éŒ¯èª¤ï¼ŒåŸå› æ˜¯è©²ä½ç½®æ˜¯read onlyçš„ç‹€æ…‹ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€²åˆ°sué€²åˆ°rootæ¬Šé™æ”¹è®Šread onlyçš„ç‹€æ…‹ï¼Œå†æŠŠæ±è¥¿ä¸Ÿé€²å»å°±å®Œæˆå®‰è£äº† $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ å¯¦éš›æ””æˆªå‰ æ‰“é–‹çš„Burp Suiteä¸€å®šè¦æŠŠBind to addressæ”¹æˆAll interfaces ![åœ–ç‰‡](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) è¨­å®šæ‰‹æ©Ÿç«¯çš„ç¶²è·¯Proxy é€™ä¸€éƒ¨åˆ†å°±è·ŸZAPç•¶åˆè¨­å®šçš„æ™‚å€™ä¸€æ¨¡ä¸€æ¨£ï¼Œç•¶ç„¶ä¹Ÿæ˜¯å¯ä»¥åƒæ•™å­¸å½±ç‰‡é‚£æ¨£ç”¨CLIçš„æ–¹å¼è™•ç† $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy æ¥ä¸‹ä¾†å°±å¯ä»¥å¯¦éš›æ””æˆªäº† Bypass SSL Pinning by Frida é‚„è¨˜å¾—ä¹‹å‰åšçš„å¯¦é©—è«–æ–‡ç­†è¨˜ä¸­æœ‰æåˆ°ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„appå°±ç®—å®‰è£äº†SSL Unpinningçš„Pluginé‚„æ˜¯ç„¡æ³•æ””æˆªåˆ°æµé‡ï¼Œæ ¹æ“šDefeating Android Certificate Pinning with Fridaæ–‡ç« çš„èªªæ˜ï¼ŒFacebookå„å¼å„æ¨£çš„Appæ‰€ä½¿ç”¨çš„æ†‘è­‰æ¨™æº–å’Œå¯¦ä½œæ–¹å¼éƒ½æ˜¯è‡ªå®šç¾©çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¨™æº–APIï¼Œé€™æ¨£çš„è©±ç”¨ä¸€èˆ¬çš„SSL Unpinningå°±é‚„æ˜¯ä¸æœƒæˆåŠŸ'><meta property="og:url" content="https://bernie6401.github.io/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html"><meta property="og:site_name" content="SBK Hugo Site"><meta property="og:title" content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta property="og:description" content='How to use ZAP as Proxy? æ ¹æ“š1æˆ‘å¤§æ¦‚çŸ¥é“æ€éº¼ä½¿ç”¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨zapçš„command lineå½¢å¼é€²è¡Œæ“ä½œï¼Œè©³ç´°çš„åƒæ•¸å¯ä»¥åƒè€ƒOfficial Documentï¼Œå¦å¤–æˆ‘çœ‹ZAPå¦‚æœè¦ç•¶ä½œProxyçš„è§’è‰²æœƒéœ€è¦ç”¨åˆ°ROOT CAæ†‘è­‰ï¼Œæ‰€ä»¥å¦‚æœå–®ç´”ç”¨ä¹‹å‰çš„æ•™å­¸æ–‡ç« æœƒä¸çŸ¥åˆ°åœ¨å“ªè£¡ç”¢ç”Ÿæ†‘è­‰ï¼Œä»–å·²ç¶“ç§»å‹•åˆ°Networkåº•ä¸‹äº† ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
ç›®å‰æˆ‘æŠŠProxyæ¶å¥½äº†ï¼Œçœ‹çš„æ˜¯é€™ç¯‡æ•™å­¸æ–‡ç« -OWASP ZAPæ“ä½œæ‰‹å†Šï¼Œè¬›çš„éå¸¸è©³ç´°
åœ¨Firefoxä¸­æœå°‹æ†‘è­‰æˆ–æ˜¯certï¼Œç›´æ¥å®‰è£åœ¨ZAPç”¢ç”Ÿçš„æ†‘è­‰æª”æ¡ˆ åœ¨Firefoxçš„settingä¸­æœå°‹Proxy ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) è¨­å®šæˆå¦‚ä¸‹ ![åœ–ç‰‡](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) åªè¦ZAPæœ‰æ‰“é–‹ï¼Œå°±å¯ä»¥é€£ç·šå‡ºå»ï¼Œä½†å¦‚æœProxyå·²ç¶“setupï¼Œå»æ²’æœ‰æ‰“é–‹ZAPæœƒé€šä¸åˆ°å¤–é¢å–” è£œå…… å¦‚æœä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“åŸ·è¡Œå®Œä½†Proxyåªèƒ½æ””æˆªåˆ°GET Methodçš„å°åŒ…ï¼Œå°±ä»£è¡¨æ†‘è­‰çˆ›æ‰äº†ï¼Œå’Œåœ¨æ‰‹æ©Ÿä¸Šä¸€æ¨£ï¼Œä½†æ‰‹æ©Ÿæœƒå‡ºç¾é€™å€‹å•é¡Œé‚„æœ‰å¯èƒ½æ˜¯SSL Pinningï¼Œç¶²é ç«¯åªéœ€è¦é‡æ–°å®‰è£ZAP Generateçš„æ–°æ†‘è­‰å°±å¥½ å¦‚æœè¨­å®šFirefoxçš„Proxyæ™‚ï¼Œæ˜¯è¨­å®šæˆä½¿ç”¨ç³»çµ±Proxyè¨­å®šï¼Œé‚£å°±è¦åœ¨é›»è…¦çš„è¨­å®šä¸­ï¼Œæ›´æ”¹Proxyçš„config ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) é€™æ¨£çš„è©±ZAPä¹Ÿå¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†æ˜¯å°±ä¸æœƒå‡ºç¾ZAPç‰¹å®šçš„ç•«é¢(åŠŸèƒ½) ![åœ–ç‰‡](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) åªæœ‰è¨­å®šæˆæ‰‹å‹•è¨­å®šProxyæ‰æœƒå‡ºç¾ï¼Œå¦å‰‡æœƒè®Šæˆé€£ç·šä¸ä¸Šçš„ç•«é¢ How to use Burp Suite as Proxy? é€™å€‹å®Œå…¨æ˜¯ç¿»è­¯ä¸¦ä¸”æŒ‰ç…§ Intercepting Android App Traffic with BurpSuite çš„å½±ç‰‡æ•™å­¸
Prepare (æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹) å¦‚æœè¦ä¿éšªä¸€é»é›¶å¤±æ•—çš„é”æˆç›®æ¨™ï¼ŒæŒ‰ç…§å½±ç‰‡çš„æ­¥é©Ÿå’Œç’°å¢ƒæ¯”è¼ƒå¥½ï¼Œå¦‚æœæ˜¯å·²ç¶“æœ‰ä¸€å°å–å¾—Rootçš„å¯¦æ©Ÿï¼Œå°±å¯ä»¥å¿½ç•¥ç”¨VMwareé–‹çš„Emulator
å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯å¾Œç›´æ¥åœ¨æ‰‹æ©Ÿå®‰è£æ†‘è­‰ æ¥è‘—å°±è¦åƒè€ƒHow to Root Android Phone & Install AlwaysTrustUserCert.zip Module?é€™ç¯‡æ–‡ç« ä¸‹é¢è¨»è§£çš„åœ°æ–¹é‡æ–°å®‰è£AlwaysTrustUserCert.zipé€™å€‹pluginï¼Œæœ€ä¿éšªçš„åšæ³•æ˜¯ å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’ é‡æ–°å•Ÿå‹•â†’ é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’ é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’ Reboot æ¥è‘—å°±ç›´æ¥è·³åˆ°ä¸‹ä¸€æ®µ(å¯¦éš›æ””æˆªå‰) (åˆ©ç”¨VMwareé–‹Emulator) VMware è¨˜å¾—å•Ÿå‹• Virtualization å®‰è£Genymotion, virtualbox, adb å®‰è£å‰å…ˆåˆ°Genymotionå®˜ç¶²è¨»å†Šå¸³è™Ÿ $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion é¸æ“‡Emulatorçš„æ‰‹æ©Ÿå‹è™Ÿå°±å¯ä»¥é–‹å•Ÿä¸€å€‹å…¨æ–°çš„Emulator å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem # é€™ä¸€æ®µæ˜¯é¡¯ç¤ºcert.pemé€™å€‹æª”æ¡ˆSubjectçš„MD5 Hash Valueï¼Œè‡³æ–¼ä»–æ€éº¼åšhashçš„ï¼Œå¯ä»¥åƒè€ƒhttps://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713ï¼Œä»–è§£é‡‹è©²hashçš„æ¨™çš„ç‚ºå“ªäº›ï¼Œä¸¦ä¸æ˜¯é‡å°é€™æ•´å€‹fileåšhash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # è¤‡è£½cert.pemä¸¦æ”¹åæˆ9a5ba575.0ï¼Œæœƒæ”¹æˆé€™æ¨£æ˜¯å› ç‚ºæ‰‹æ©Ÿç•¶ä¸­å„²å­˜æ†‘è­‰çš„æ–¹å¼å°±æ˜¯é€™æ¨£ $ cp cert.pem 9a5ba575.0 # é€™ä¸€æ®µæ˜¯printå‡º9a5ba575.0çš„subjectï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åšhashçš„æ¨™çš„å°±æ˜¯ä¸‹é¢é€™ä¸€ä¸²æ±è¥¿ï¼Œæ‰€ä»¥åªè¦æ˜¯PortSwiggerçš„æ†‘è­‰ï¼Œåªè¦ä»–å€‘æ²’æœ‰æ”¹subjectï¼ŒåŸºæœ¬ä¸Šåšhashå¾—åˆ°çš„çµæœéƒ½æœƒæ˜¯9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯ä¸­å„²å­˜æ†‘è­‰çš„çµ•å°ä½å€ å¦‚æœç›´æ¥ç”¨adb pushåˆ°è©²ä½ç½®ï¼Œæœƒç™¼ç¾éŒ¯èª¤ï¼ŒåŸå› æ˜¯è©²ä½ç½®æ˜¯read onlyçš„ç‹€æ…‹ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€²åˆ°sué€²åˆ°rootæ¬Šé™æ”¹è®Šread onlyçš„ç‹€æ…‹ï¼Œå†æŠŠæ±è¥¿ä¸Ÿé€²å»å°±å®Œæˆå®‰è£äº† $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ å¯¦éš›æ””æˆªå‰ æ‰“é–‹çš„Burp Suiteä¸€å®šè¦æŠŠBind to addressæ”¹æˆAll interfaces ![åœ–ç‰‡](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) è¨­å®šæ‰‹æ©Ÿç«¯çš„ç¶²è·¯Proxy é€™ä¸€éƒ¨åˆ†å°±è·ŸZAPç•¶åˆè¨­å®šçš„æ™‚å€™ä¸€æ¨¡ä¸€æ¨£ï¼Œç•¶ç„¶ä¹Ÿæ˜¯å¯ä»¥åƒæ•™å­¸å½±ç‰‡é‚£æ¨£ç”¨CLIçš„æ–¹å¼è™•ç† $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy æ¥ä¸‹ä¾†å°±å¯ä»¥å¯¦éš›æ””æˆªäº† Bypass SSL Pinning by Frida é‚„è¨˜å¾—ä¹‹å‰åšçš„å¯¦é©—è«–æ–‡ç­†è¨˜ä¸­æœ‰æåˆ°ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„appå°±ç®—å®‰è£äº†SSL Unpinningçš„Pluginé‚„æ˜¯ç„¡æ³•æ””æˆªåˆ°æµé‡ï¼Œæ ¹æ“šDefeating Android Certificate Pinning with Fridaæ–‡ç« çš„èªªæ˜ï¼ŒFacebookå„å¼å„æ¨£çš„Appæ‰€ä½¿ç”¨çš„æ†‘è­‰æ¨™æº–å’Œå¯¦ä½œæ–¹å¼éƒ½æ˜¯è‡ªå®šç¾©çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¨™æº–APIï¼Œé€™æ¨£çš„è©±ç”¨ä¸€èˆ¬çš„SSL Unpinningå°±é‚„æ˜¯ä¸æœƒæˆåŠŸ'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Problem Solutions"><meta property="article:tag" content="Problem Solution"><meta itemprop=name content="How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site"><meta itemprop=description content='How to use ZAP as Proxy? æ ¹æ“š1æˆ‘å¤§æ¦‚çŸ¥é“æ€éº¼ä½¿ç”¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨zapçš„command lineå½¢å¼é€²è¡Œæ“ä½œï¼Œè©³ç´°çš„åƒæ•¸å¯ä»¥åƒè€ƒOfficial Documentï¼Œå¦å¤–æˆ‘çœ‹ZAPå¦‚æœè¦ç•¶ä½œProxyçš„è§’è‰²æœƒéœ€è¦ç”¨åˆ°ROOT CAæ†‘è­‰ï¼Œæ‰€ä»¥å¦‚æœå–®ç´”ç”¨ä¹‹å‰çš„æ•™å­¸æ–‡ç« æœƒä¸çŸ¥åˆ°åœ¨å“ªè£¡ç”¢ç”Ÿæ†‘è­‰ï¼Œä»–å·²ç¶“ç§»å‹•åˆ°Networkåº•ä¸‹äº† ![image](https://hackmd.io/_uploads/B11DaMnpT.png =400x)
ç›®å‰æˆ‘æŠŠProxyæ¶å¥½äº†ï¼Œçœ‹çš„æ˜¯é€™ç¯‡æ•™å­¸æ–‡ç« -OWASP ZAPæ“ä½œæ‰‹å†Šï¼Œè¬›çš„éå¸¸è©³ç´°
åœ¨Firefoxä¸­æœå°‹æ†‘è­‰æˆ–æ˜¯certï¼Œç›´æ¥å®‰è£åœ¨ZAPç”¢ç”Ÿçš„æ†‘è­‰æª”æ¡ˆ åœ¨Firefoxçš„settingä¸­æœå°‹Proxy ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ4NI5Aap.png =400x) è¨­å®šæˆå¦‚ä¸‹ ![åœ–ç‰‡](https://hackmd.io/_uploads/HJoGB9CTa.png =400x) åªè¦ZAPæœ‰æ‰“é–‹ï¼Œå°±å¯ä»¥é€£ç·šå‡ºå»ï¼Œä½†å¦‚æœProxyå·²ç¶“setupï¼Œå»æ²’æœ‰æ‰“é–‹ZAPæœƒé€šä¸åˆ°å¤–é¢å–” è£œå…… å¦‚æœä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“åŸ·è¡Œå®Œä½†Proxyåªèƒ½æ””æˆªåˆ°GET Methodçš„å°åŒ…ï¼Œå°±ä»£è¡¨æ†‘è­‰çˆ›æ‰äº†ï¼Œå’Œåœ¨æ‰‹æ©Ÿä¸Šä¸€æ¨£ï¼Œä½†æ‰‹æ©Ÿæœƒå‡ºç¾é€™å€‹å•é¡Œé‚„æœ‰å¯èƒ½æ˜¯SSL Pinningï¼Œç¶²é ç«¯åªéœ€è¦é‡æ–°å®‰è£ZAP Generateçš„æ–°æ†‘è­‰å°±å¥½ å¦‚æœè¨­å®šFirefoxçš„Proxyæ™‚ï¼Œæ˜¯è¨­å®šæˆä½¿ç”¨ç³»çµ±Proxyè¨­å®šï¼Œé‚£å°±è¦åœ¨é›»è…¦çš„è¨­å®šä¸­ï¼Œæ›´æ”¹Proxyçš„config ![åœ–ç‰‡](https://hackmd.io/_uploads/HJ6STMP1R.png =400x) é€™æ¨£çš„è©±ZAPä¹Ÿå¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†æ˜¯å°±ä¸æœƒå‡ºç¾ZAPç‰¹å®šçš„ç•«é¢(åŠŸèƒ½) ![åœ–ç‰‡](https://hackmd.io/_uploads/ByAxAfPyA.png =400x) åªæœ‰è¨­å®šæˆæ‰‹å‹•è¨­å®šProxyæ‰æœƒå‡ºç¾ï¼Œå¦å‰‡æœƒè®Šæˆé€£ç·šä¸ä¸Šçš„ç•«é¢ How to use Burp Suite as Proxy? é€™å€‹å®Œå…¨æ˜¯ç¿»è­¯ä¸¦ä¸”æŒ‰ç…§ Intercepting Android App Traffic with BurpSuite çš„å½±ç‰‡æ•™å­¸
Prepare (æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹) å¦‚æœè¦ä¿éšªä¸€é»é›¶å¤±æ•—çš„é”æˆç›®æ¨™ï¼ŒæŒ‰ç…§å½±ç‰‡çš„æ­¥é©Ÿå’Œç’°å¢ƒæ¯”è¼ƒå¥½ï¼Œå¦‚æœæ˜¯å·²ç¶“æœ‰ä¸€å°å–å¾—Rootçš„å¯¦æ©Ÿï¼Œå°±å¯ä»¥å¿½ç•¥ç”¨VMwareé–‹çš„Emulator
å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯å¾Œç›´æ¥åœ¨æ‰‹æ©Ÿå®‰è£æ†‘è­‰ æ¥è‘—å°±è¦åƒè€ƒHow to Root Android Phone & Install AlwaysTrustUserCert.zip Module?é€™ç¯‡æ–‡ç« ä¸‹é¢è¨»è§£çš„åœ°æ–¹é‡æ–°å®‰è£AlwaysTrustUserCert.zipé€™å€‹pluginï¼Œæœ€ä¿éšªçš„åšæ³•æ˜¯ å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’ é‡æ–°å•Ÿå‹•â†’ é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’ é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’ Reboot æ¥è‘—å°±ç›´æ¥è·³åˆ°ä¸‹ä¸€æ®µ(å¯¦éš›æ””æˆªå‰) (åˆ©ç”¨VMwareé–‹Emulator) VMware è¨˜å¾—å•Ÿå‹• Virtualization å®‰è£Genymotion, virtualbox, adb å®‰è£å‰å…ˆåˆ°Genymotionå®˜ç¶²è¨»å†Šå¸³è™Ÿ $ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin $ chmod +x genymotion-3.6.0-linux_x64.bin $ ./genymotion-3.6.0-linux_x64.bin $ sudo apt install virtualbox adb -y $ cd genymotion $ ./genymotion # login to genymotion é¸æ“‡Emulatorçš„æ‰‹æ©Ÿå‹è™Ÿå°±å¯ä»¥é–‹å•Ÿä¸€å€‹å…¨æ–°çš„Emulator å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹) æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜ $ curl localhost:8080/cert -o cert.der # é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ $ openssl x509 -inform der -in cert.der -out cert.pem # é€™ä¸€æ®µæ˜¯é¡¯ç¤ºcert.pemé€™å€‹æª”æ¡ˆSubjectçš„MD5 Hash Valueï¼Œè‡³æ–¼ä»–æ€éº¼åšhashçš„ï¼Œå¯ä»¥åƒè€ƒhttps://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713ï¼Œä»–è§£é‡‹è©²hashçš„æ¨™çš„ç‚ºå“ªäº›ï¼Œä¸¦ä¸æ˜¯é‡å°é€™æ•´å€‹fileåšhash $ openssl x509 -inform PEM -subject_hash_old -in cert.pem 9a5ba575 -----BEGIN CERTIFICATE----- MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0 U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2 OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni 2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9 0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4 DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3 DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68 kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo -----END CERTIFICATE----- # è¤‡è£½cert.pemä¸¦æ”¹åæˆ9a5ba575.0ï¼Œæœƒæ”¹æˆé€™æ¨£æ˜¯å› ç‚ºæ‰‹æ©Ÿç•¶ä¸­å„²å­˜æ†‘è­‰çš„æ–¹å¼å°±æ˜¯é€™æ¨£ $ cp cert.pem 9a5ba575.0 # é€™ä¸€æ®µæ˜¯printå‡º9a5ba575.0çš„subjectï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åšhashçš„æ¨™çš„å°±æ˜¯ä¸‹é¢é€™ä¸€ä¸²æ±è¥¿ï¼Œæ‰€ä»¥åªè¦æ˜¯PortSwiggerçš„æ†‘è­‰ï¼Œåªè¦ä»–å€‘æ²’æœ‰æ”¹subjectï¼ŒåŸºæœ¬ä¸Šåšhashå¾—åˆ°çš„çµæœéƒ½æœƒæ˜¯9a5ba575 $ openssl x509 -inform PEM -subject -in 9a5ba575.0 subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯ä¸­å„²å­˜æ†‘è­‰çš„çµ•å°ä½å€ å¦‚æœç›´æ¥ç”¨adb pushåˆ°è©²ä½ç½®ï¼Œæœƒç™¼ç¾éŒ¯èª¤ï¼ŒåŸå› æ˜¯è©²ä½ç½®æ˜¯read onlyçš„ç‹€æ…‹ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€²åˆ°sué€²åˆ°rootæ¬Šé™æ”¹è®Šread onlyçš„ç‹€æ…‹ï¼Œå†æŠŠæ±è¥¿ä¸Ÿé€²å»å°±å®Œæˆå®‰è£äº† $ adb shell # su # mount -o remount,rw / # exit # exit $ adb push 9a5ba575.0 /system/etc/security/cacerts/ å¯¦éš›æ””æˆªå‰ æ‰“é–‹çš„Burp Suiteä¸€å®šè¦æŠŠBind to addressæ”¹æˆAll interfaces ![åœ–ç‰‡](https://hackmd.io/_uploads/B1HBnVVPR.png =400x) è¨­å®šæ‰‹æ©Ÿç«¯çš„ç¶²è·¯Proxy é€™ä¸€éƒ¨åˆ†å°±è·ŸZAPç•¶åˆè¨­å®šçš„æ™‚å€™ä¸€æ¨¡ä¸€æ¨£ï¼Œç•¶ç„¶ä¹Ÿæ˜¯å¯ä»¥åƒæ•™å­¸å½±ç‰‡é‚£æ¨£ç”¨CLIçš„æ–¹å¼è™•ç† $ adb shell settings put global http_proxy <proxy server ip>:8080 # set phone proxy $ adb shell settings put global http_proxy :0 # unset phone proxy æ¥ä¸‹ä¾†å°±å¯ä»¥å¯¦éš›æ””æˆªäº† Bypass SSL Pinning by Frida é‚„è¨˜å¾—ä¹‹å‰åšçš„å¯¦é©—è«–æ–‡ç­†è¨˜ä¸­æœ‰æåˆ°ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„appå°±ç®—å®‰è£äº†SSL Unpinningçš„Pluginé‚„æ˜¯ç„¡æ³•æ””æˆªåˆ°æµé‡ï¼Œæ ¹æ“šDefeating Android Certificate Pinning with Fridaæ–‡ç« çš„èªªæ˜ï¼ŒFacebookå„å¼å„æ¨£çš„Appæ‰€ä½¿ç”¨çš„æ†‘è­‰æ¨™æº–å’Œå¯¦ä½œæ–¹å¼éƒ½æ˜¯è‡ªå®šç¾©çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¨™æº–APIï¼Œé€™æ¨£çš„è©±ç”¨ä¸€èˆ¬çš„SSL Unpinningå°±é‚„æ˜¯ä¸æœƒæˆåŠŸ'><meta itemprop=wordCount content="771"><meta itemprop=keywords content="Problem Solution"><title>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android? :: SBK Hugo Site</title>
<link href=/fonts/fontawesome/css/fontawesome-all.min.css?1743619851 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1743619851 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1743619851 rel=stylesheet><link href=/css/theme.min.css?1743619851 rel=stylesheet><link href=/css/format-html.min.css?1743619851 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1743619851 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1743619851 defer></script><script src=/js/lunr/lunr.min.js?1743619851 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1743619851 defer></script><script src=/js/lunr/lunr.multi.min.js?1743619851 defer></script><script src=/js/lunr/lunr.en.min.js?1743619851 defer></script><script src=/js/search.min.js?1743619851 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://bernie6401.github.io",window.relearn.contentLangs=["en"],window.relearn.index_js_url="/searchindex.en.js?1743619851",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["auto"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#è£œå……>è£œå……</a></li></ul><ul><li><a href=#prepare>Prepare</a><ul><li><a href=#æœ‰å–å¾—rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹>(æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹)</a></li><li><a href=#åˆ©ç”¨vmwareé–‹emulator>(åˆ©ç”¨VMwareé–‹Emulator)</a></li></ul></li><li><a href=#å¯¦éš›æ””æˆªå‰>å¯¦éš›æ””æˆªå‰</a></li><li><a href=#bypass-ssl-pinning-by-frida>Bypass SSL Pinning by Frida</a></li><li><a href=#å°æ¯”>å°æ¯”</a><ul><li><a href=#æ²’æœ‰ä½¿ç”¨fridaçš„æ™‚å€™>æ²’æœ‰ä½¿ç”¨Fridaçš„æ™‚å€™</a></li><li><a href=#æœ‰ä½¿ç”¨fridaçš„æ™‚å€™>æœ‰ä½¿ç”¨Fridaçš„æ™‚å€™</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>SBK Hugo Site</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/problem-solutions/index.html><span itemprop=name>Problem Solutions</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html title="How to use VScode / Web Storm Debug JS? (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html title="MITMProxyç›¸é—œå•é¡Œæ•´ç† (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable problem-solutions" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline><div class="R-taxonomy taxonomy-tags cstyle tags" title=Tags style=--VARIABLE-TAGS-BG-color:var(--INTERNAL-TAG-BG-color)><ul><li><a class=term-link href=/tags/problem-solution/index.html>Problem Solution</a></li></ul></div></header><h1 id=how-to-use-zapburp-suitemitmproxy-as-proxy-for-android>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</h1><h1 id=how-to-use-zap-as-proxy>How to use ZAP as Proxy?</h1><ul><li><p>æ ¹æ“š<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>æˆ‘å¤§æ¦‚çŸ¥é“æ€éº¼ä½¿ç”¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒä½¿ç”¨zapçš„command lineå½¢å¼é€²è¡Œæ“ä½œï¼Œè©³ç´°çš„åƒæ•¸å¯ä»¥åƒè€ƒ<a href=https://www.zaproxy.org/docs/desktop/cmdline/ rel=external target=_blank>Official Document</a>ï¼Œå¦å¤–æˆ‘çœ‹ZAPå¦‚æœè¦ç•¶ä½œProxyçš„è§’è‰²æœƒéœ€è¦ç”¨åˆ°ROOT CAæ†‘è­‰ï¼Œæ‰€ä»¥å¦‚æœå–®ç´”ç”¨ä¹‹å‰çš„æ•™å­¸æ–‡ç« æœƒä¸çŸ¥åˆ°åœ¨å“ªè£¡ç”¢ç”Ÿæ†‘è­‰ï¼Œä»–å·²ç¶“ç§»å‹•åˆ°Networkåº•ä¸‹äº†
![image](<a href=https://hackmd.io/_uploads/B11DaMnpT.png rel=external target=_blank>https://hackmd.io/_uploads/B11DaMnpT.png</a> =400x)</p></li><li><p>ç›®å‰æˆ‘æŠŠProxyæ¶å¥½äº†ï¼Œçœ‹çš„æ˜¯<a href=https://hackmd.io/@ZLgd0D1pQcyasZhkkWKG4g/HyFZFPDQu rel=external target=_blank>é€™ç¯‡æ•™å­¸æ–‡ç« -OWASP ZAPæ“ä½œæ‰‹å†Š</a>ï¼Œè¬›çš„éå¸¸è©³ç´°</p><ol><li>åœ¨Firefoxä¸­æœå°‹æ†‘è­‰æˆ–æ˜¯certï¼Œç›´æ¥å®‰è£åœ¨ZAPç”¢ç”Ÿçš„æ†‘è­‰æª”æ¡ˆ</li><li>åœ¨Firefoxçš„settingä¸­æœå°‹Proxy
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/HJ4NI5Aap.png rel=external target=_blank>https://hackmd.io/_uploads/HJ4NI5Aap.png</a> =400x)</li><li>è¨­å®šæˆå¦‚ä¸‹
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/HJoGB9CTa.png rel=external target=_blank>https://hackmd.io/_uploads/HJoGB9CTa.png</a> =400x)
åªè¦ZAPæœ‰æ‰“é–‹ï¼Œå°±å¯ä»¥é€£ç·šå‡ºå»ï¼Œä½†å¦‚æœProxyå·²ç¶“setupï¼Œå»æ²’æœ‰æ‰“é–‹ZAPæœƒé€šä¸åˆ°å¤–é¢å–”</li></ol></li></ul><h2 id=è£œå……>è£œå……</h2><ol><li>å¦‚æœä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“åŸ·è¡Œå®Œä½†Proxyåªèƒ½æ””æˆªåˆ°GET Methodçš„å°åŒ…ï¼Œå°±ä»£è¡¨æ†‘è­‰çˆ›æ‰äº†ï¼Œå’Œåœ¨æ‰‹æ©Ÿä¸Šä¸€æ¨£ï¼Œä½†æ‰‹æ©Ÿæœƒå‡ºç¾é€™å€‹å•é¡Œé‚„æœ‰å¯èƒ½æ˜¯SSL Pinningï¼Œç¶²é ç«¯åªéœ€è¦é‡æ–°å®‰è£ZAP Generateçš„æ–°æ†‘è­‰å°±å¥½</li><li>å¦‚æœè¨­å®šFirefoxçš„Proxyæ™‚ï¼Œæ˜¯è¨­å®šæˆ<code>ä½¿ç”¨ç³»çµ±Proxyè¨­å®š</code>ï¼Œé‚£å°±è¦åœ¨é›»è…¦çš„è¨­å®šä¸­ï¼Œæ›´æ”¹Proxyçš„config
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/HJ6STMP1R.png rel=external target=_blank>https://hackmd.io/_uploads/HJ6STMP1R.png</a> =400x)
é€™æ¨£çš„è©±ZAPä¹Ÿå¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†æ˜¯å°±ä¸æœƒå‡ºç¾ZAPç‰¹å®šçš„ç•«é¢(åŠŸèƒ½)
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/ByAxAfPyA.png rel=external target=_blank>https://hackmd.io/_uploads/ByAxAfPyA.png</a> =400x)
åªæœ‰è¨­å®šæˆ<code>æ‰‹å‹•è¨­å®šProxy</code>æ‰æœƒå‡ºç¾ï¼Œå¦å‰‡æœƒè®Šæˆé€£ç·šä¸ä¸Šçš„ç•«é¢
<a href=#R-image-8046875afb1131a4cb13cf7164eb4f8a class=lightbox-link><img alt=åœ–ç‰‡ class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/B1vHRzPJ0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8046875afb1131a4cb13cf7164eb4f8a><img alt=åœ–ç‰‡ class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/B1vHRzPJ0.png></a></li></ol><h1 id=how-to-use-burp-suite-as-proxy>How to use Burp Suite as Proxy?</h1><p>é€™å€‹å®Œå…¨æ˜¯ç¿»è­¯ä¸¦ä¸”æŒ‰ç…§<a href="https://youtu.be/xp8ufidc514?si=4y0JhxW0kbnO1HjF" rel=external target=_blank> Intercepting Android App Traffic with BurpSuite </a>çš„å½±ç‰‡æ•™å­¸</p><h2 id=prepare>Prepare</h2><h3 id=æœ‰å–å¾—rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹>(æœ‰å–å¾—Rootå¯¦æ©Ÿçš„æƒ…æ³ä¸‹)</h3><p>å¦‚æœè¦ä¿éšªä¸€é»é›¶å¤±æ•—çš„é”æˆç›®æ¨™ï¼ŒæŒ‰ç…§å½±ç‰‡çš„æ­¥é©Ÿå’Œç’°å¢ƒæ¯”è¼ƒå¥½ï¼Œå¦‚æœæ˜¯å·²ç¶“æœ‰ä¸€å°å–å¾—Rootçš„å¯¦æ©Ÿï¼Œå°±å¯ä»¥å¿½ç•¥ç”¨VMwareé–‹çš„Emulator</p><ul><li>å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹)
æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ<a href=https://medium.com/chouhsiang/%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AD%98-pem-%E8%88%87-der-dad659e0a40d rel=external target=_blank>[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜</a><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl localhost:8080/cert -o cert.der

# é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ
$ openssl x509 -inform der -in cert.der -out cert.pem</code></pre></div></li><li>ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯å¾Œç›´æ¥åœ¨æ‰‹æ©Ÿå®‰è£æ†‘è­‰</li><li>æ¥è‘—å°±è¦åƒè€ƒ<a href=https://hackmd.io/nAJIgt13TjSZ5nqLR4-BiQ#Install-AlwaysTrustUserCertzip-Module rel=external target=_blank>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a>é€™ç¯‡æ–‡ç« ä¸‹é¢è¨»è§£çš„åœ°æ–¹é‡æ–°å®‰è£AlwaysTrustUserCert.zipé€™å€‹pluginï¼Œæœ€ä¿éšªçš„åšæ³•æ˜¯
å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’
é‡æ–°å•Ÿå‹•â†’
é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’
é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’
Reboot
æ¥è‘—å°±ç›´æ¥è·³åˆ°ä¸‹ä¸€æ®µ(å¯¦éš›æ””æˆªå‰)</li></ul><h3 id=åˆ©ç”¨vmwareé–‹emulator>(åˆ©ç”¨VMwareé–‹Emulator)</h3><ul><li>VMware è¨˜å¾—å•Ÿå‹• Virtualization</li><li>å®‰è£Genymotion, virtualbox, adb
å®‰è£å‰å…ˆåˆ°Genymotionå®˜ç¶²è¨»å†Šå¸³è™Ÿ<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ wget https://dl.genymotion.com/releases/genymotion-3.6.0/genymotion-3.6.0-linux_x64.bin
$ chmod +x genymotion-3.6.0-linux_x64.bin
$ ./genymotion-3.6.0-linux_x64.bin
$ sudo apt install virtualbox adb -y
$ cd genymotion
$ ./genymotion # login to genymotion</code></pre></div></li><li>é¸æ“‡Emulatorçš„æ‰‹æ©Ÿå‹è™Ÿå°±å¯ä»¥é–‹å•Ÿä¸€å€‹å…¨æ–°çš„Emulator</li><li>å–å¾—Burp Suite Cert(åœ¨é–‹å•ŸBurp Suiteçš„å‰æä¸‹)
æœ‰é—œæ–¼DERå’ŒPEMçš„èƒŒæ™¯çŸ¥è­˜å¯ä»¥åƒè€ƒ<a href=https://medium.com/chouhsiang/%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AD%98-pem-%E8%88%87-der-dad659e0a40d rel=external target=_blank>[èƒŒæ™¯çŸ¥è­˜] æ†‘è­‰çš„æ ¼å¼ PEM èˆ‡ DER | è‡ªç„¶äººæ†‘è­‰é–‹ç™¼ç­†è¨˜</a><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ curl localhost:8080/cert -o cert.der

# é€™ä¸€æ®µæ˜¯å¼·åˆ¶æŠŠderæª”æ¡ˆè½‰æ›æˆpemæª”æ¡ˆ
$ openssl x509 -inform der -in cert.der -out cert.pem

# é€™ä¸€æ®µæ˜¯é¡¯ç¤ºcert.pemé€™å€‹æª”æ¡ˆSubjectçš„MD5 Hash Valueï¼Œè‡³æ–¼ä»–æ€éº¼åšhashçš„ï¼Œå¯ä»¥åƒè€ƒhttps://github.com/spacemonkeygo/openssl/issues/112#issuecomment-443313713ï¼Œä»–è§£é‡‹è©²hashçš„æ¨™çš„ç‚ºå“ªäº›ï¼Œä¸¦ä¸æ˜¯é‡å°é€™æ•´å€‹fileåšhash
$ openssl x509 -inform PEM -subject_hash_old -in cert.pem
9a5ba575
-----BEGIN CERTIFICATE-----
MIIDpzCCAo+gAwIBAgIEdz+xgjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhML
UG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0
U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2ln
Z2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDA4MjgxMzUxMzda
Fw0zMzA4MjgxMzUxMzdaMIGKMRQwEgYDVQQGEwtQb3J0U3dpZ2dlcjEUMBIGA1UE
CBMLUG9ydFN3aWdnZXIxFDASBgNVBAcTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQ
b3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExFzAVBgNVBAMTDlBv
cnRTd2lnZ2VyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwCM2
OEX9sby5W3ck1djqnohtIpNKIkBWw0qvwDfi17Hvyc0YIUPzQE+6o/a1KRgCS6Ni
2SgcJ/soKcRkMn5nmI5Mh+6w0NGEd13VmIcSkd97RghpeNivd5u0LOHW4KVYmxh9
0pDlt+6DD2zQIShM0hxUTGpaaPaRk9S9z0kWHNyJ9cfy627IWDSl1oNrQvNYTWU4
DhjBa0AOQUjCrTqkCALwCEAErZRGgjeonkola117DFG8twdjdA+55Iegw2Bd8ogd
JafibIUutXwGFiaAxx/ckapkqUKFnjBbXwyfoFmeiuiHqB3oy8Y8tduSh1e9lJNq
bMWW+UDG/4H5kXNOgwIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3
DQEBCwUAA4IBAQAn4BB23JUP0EThzsQY/299zJW0Z1AquMwYRYtWhhno+OoQ8gHu
zKNQHdV2RHr/Ns4z7tP7aNyWiCgSmmOwJ/0l7pY74NjxbZPdqVnHMy5Vg6ehggOH
ShKk6N561W4856G2AaiOqtY1a84wj1l5GtAtSbfVJtu3SdOvdiR2oD8C8IWx71VN
EGjEuIkbWdyysVQkhXkn1GAl8E3CRPqDrqJL4HA9CSAPEvvhbpUvJ/j+dqp+bH68
kPBVOVVKdzUBbngYeRpSwGm2WlbZ8RiWoeodsixPKiK2tSqtGG+D1H/bOKH/aq8x
PVGwpBZqfagUIDw+E1x1zmbtUkpY5nHCAcEo
-----END CERTIFICATE-----

# è¤‡è£½cert.pemä¸¦æ”¹åæˆ9a5ba575.0ï¼Œæœƒæ”¹æˆé€™æ¨£æ˜¯å› ç‚ºæ‰‹æ©Ÿç•¶ä¸­å„²å­˜æ†‘è­‰çš„æ–¹å¼å°±æ˜¯é€™æ¨£
$ cp cert.pem 9a5ba575.0

# é€™ä¸€æ®µæ˜¯printå‡º9a5ba575.0çš„subjectï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åšhashçš„æ¨™çš„å°±æ˜¯ä¸‹é¢é€™ä¸€ä¸²æ±è¥¿ï¼Œæ‰€ä»¥åªè¦æ˜¯PortSwiggerçš„æ†‘è­‰ï¼Œåªè¦ä»–å€‘æ²’æœ‰æ”¹subjectï¼ŒåŸºæœ¬ä¸Šåšhashå¾—åˆ°çš„çµæœéƒ½æœƒæ˜¯9a5ba575
$ openssl x509 -inform PEM -subject -in 9a5ba575.0
subject=C = PortSwigger, ST = PortSwigger, L = PortSwigger, O = PortSwigger, OU = PortSwigger CA, CN = PortSwigger CA</code></pre></div></li><li>ä¸Ÿåˆ°æ‰‹æ©Ÿç«¯ä¸­å„²å­˜æ†‘è­‰çš„çµ•å°ä½å€
å¦‚æœç›´æ¥ç”¨adb pushåˆ°è©²ä½ç½®ï¼Œæœƒç™¼ç¾éŒ¯èª¤ï¼ŒåŸå› æ˜¯è©²ä½ç½®æ˜¯read onlyçš„ç‹€æ…‹ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€²åˆ°sué€²åˆ°rootæ¬Šé™æ”¹è®Šread onlyçš„ç‹€æ…‹ï¼Œå†æŠŠæ±è¥¿ä¸Ÿé€²å»å°±å®Œæˆå®‰è£äº†<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell
# su
# mount -o remount,rw /
# exit
# exit
$ adb push 9a5ba575.0 /system/etc/security/cacerts/</code></pre></div></li></ul><h2 id=å¯¦éš›æ””æˆªå‰>å¯¦éš›æ””æˆªå‰</h2><ol><li>æ‰“é–‹çš„Burp Suiteä¸€å®šè¦æŠŠBind to addressæ”¹æˆAll interfaces
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/B1HBnVVPR.png rel=external target=_blank>https://hackmd.io/_uploads/B1HBnVVPR.png</a> =400x)</li><li>è¨­å®šæ‰‹æ©Ÿç«¯çš„ç¶²è·¯Proxy
é€™ä¸€éƒ¨åˆ†å°±è·ŸZAPç•¶åˆè¨­å®šçš„æ™‚å€™ä¸€æ¨¡ä¸€æ¨£ï¼Œç•¶ç„¶ä¹Ÿæ˜¯å¯ä»¥åƒæ•™å­¸å½±ç‰‡é‚£æ¨£ç”¨CLIçš„æ–¹å¼è™•ç†<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell settings put global http_proxy &lt;proxy server ip&gt;:8080 # set phone proxy
$ adb shell settings put global http_proxy :0 # unset phone proxy</code></pre></div></li><li>æ¥ä¸‹ä¾†å°±å¯ä»¥å¯¦éš›æ””æˆªäº†</li></ol><h2 id=bypass-ssl-pinning-by-frida>Bypass SSL Pinning by Frida</h2><p>é‚„è¨˜å¾—ä¹‹å‰åšçš„å¯¦é©—<a href=https://hackmd.io/@SBK6401/r155hduCT#%E7%84%A1%E6%B3%95%E4%BD%BF%E7%94%A8 rel=external target=_blank>è«–æ–‡ç­†è¨˜</a>ä¸­æœ‰æåˆ°ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„appå°±ç®—å®‰è£äº†SSL Unpinningçš„Pluginé‚„æ˜¯ç„¡æ³•æ””æˆªåˆ°æµé‡ï¼Œæ ¹æ“š<a href=https://httptoolkit.com/blog/frida-certificate-pinning/ rel=external target=_blank>Defeating Android Certificate Pinning with Frida</a>æ–‡ç« çš„èªªæ˜ï¼ŒFacebookå„å¼å„æ¨£çš„Appæ‰€ä½¿ç”¨çš„æ†‘è­‰æ¨™æº–å’Œå¯¦ä½œæ–¹å¼éƒ½æ˜¯è‡ªå®šç¾©çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¨™æº–APIï¼Œé€™æ¨£çš„è©±ç”¨ä¸€èˆ¬çš„SSL Unpinningå°±é‚„æ˜¯ä¸æœƒæˆåŠŸ</p><blockquote><p>Notably some apps which will go above and beyond, by implementing their own custom certificate pinning techniques from scratch, to make disabling it as difficult as possible. The prime example of this is the various Facebook apps, which all use their own custom reimplementation of TLS rather than the standard platform APIs.</p><p>It&rsquo;s definitely possible to automatically remove certificate pinning features from that too within the same Frida script in theory (contributions very welcome!), but it&rsquo;s significantly more difficult than mocking out a well-known common library, so I haven&rsquo;t done that yet, and so this script won&rsquo;t work for Facebook, Facebook Messenger, Instagram, or similar.</p></blockquote><p>æ‰€ä»¥é€šéä¸Šè¿°æ•™å­¸å½±ç‰‡ï¼Œæˆ‘å€‘å¯ä»¥ç”¨Fridaæ­é…ç‰¹å®šAppçš„è…³æœ¬å»Hookç‰¹å®šAppä¸­çš„ç‰¹å®šFunctionï¼Œè®“æˆ‘å€‘èƒ½å¤ åœ¨Proxyä¸­æ””æˆªåˆ°æµé‡</p><ol><li>å®‰è£Frida-toolså’ŒFrida-server<div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ conda create --name proxy python<span style=color:#f92672>=</span>3.11 -y
</span></span><span style=display:flex><span>$ pip install frida-tools</span></span></code></pre></div>æ¥è‘—æŒ‰ç…§<a href=https://frida.re/docs/android/ rel=external target=_blank>å®˜ç¶²</a>çš„èªªæ˜å®‰è£frida-server<ol><li>å…ˆå¾æ‰‹æ©Ÿçœ‹æ¶æ§‹
ä»¥æˆ‘çš„Google Pixel 6aä¾†èªªï¼Œæ¶æ§‹æ˜¯aarch64<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ adb shell uname -a
Linux localhost 5.10.157-android13-4-00001-g914e947b041d-ab10144456 #1 SMP PREEMPT Tue May 16 08:47:42 UTC 2023 aarch64 Toybox</code></pre></div></li><li>å†åˆ°<a href=https://github.com/frida/frida/releases rel=external target=_blank>github releases</a>ä¸‹è¼‰æœ€æ–°çš„server
æ­¤æ™‚æˆ‘è¦é¸çš„ç‰ˆæœ¬å°±æ˜¯frida-server-{version number}-android-arm64.xz
<a href=#R-image-af438d292e8731b7273c0d046b622144 class=lightbox-link><img alt=åœ–ç‰‡ class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/S1S234ND0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-af438d292e8731b7273c0d046b622144><img alt=åœ–ç‰‡ class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/S1S234ND0.png></a></li><li>è§£å£“ç¸®å¾Œæ”¾åˆ°æ‰‹æ©Ÿç«¯ä¸Šä¸¦ä¸”å•Ÿå‹•é€™å€‹frida-server<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ mv frida-server-16.2.5-android-arm64 frida-server # rename it
$ adb push frida-server /data/local/tmp/
$ adb shell &#34;chmod 755 /data/local/tmp/frida-server&#34;
$ adb shell &#34;/data/local/tmp/frida-server &amp;&#34;</code></pre></div></li></ol></li><li>ä¸‹è¼‰Instagramçš„è…³æœ¬
åŒæ¨£æ ¹æ“šå½±ç‰‡æ•™å­¸ï¼Œåˆ°<a href="https://github.com/Eltion/Instagram-SSL-Pinning-Bypass?tab=readme-ov-file" rel=external target=_blank>Eltion/Instagram-SSL-Pinning-Bypass</a>ä¸‹è¼‰æœ€é—œéµçš„.js scriptï¼Œä»–è£¡é¢é‚„æœ‰å…¶ä»–çš„App Scriptï¼ŒåŒ…å«threadså’Œmessagerä¹‹é¡çš„<div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ wget https://raw.githubusercontent.com/Eltion/Instagram-SSL-Pinning-Bypass/main/instagram-ssl-pinning-bypass.js</code></pre></div></li><li>å•Ÿå‹•Burp Suiteå’Œè…³æœ¬
<strong>Runè…³æœ¬ä¹‹å‰æŠŠInstagramçš„Appå¼·åˆ¶åœæ­¢</strong><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-bash! data-lang=bash!>$ frida -U -l ./instagram-ssl-pinning-bypass.js -f com.instagram.android
     ____
    / _  |   Frida 16.2.1 - A world-class dynamic instrumentation toolkit
   | (_| |
    &gt; _  |   Commands:
   /_/ |_|       help      -&gt; Displays the help system
   . . . .       object?   -&gt; Display information about &#39;object&#39;
   . . . .       exit/quit -&gt; Exit
   . . . .
   . . . .   More info at https://frida.re/docs/home/
   . . . .
   . . . .   Connected to Pixel 6a (id=24121JEGR04513)
Spawning `com.instagram.android`...
[*][*] Waiting for libliger...
Spawned `com.instagram.android`. Resuming main thread!
[Pixel 6a::com.instagram.android ]-&gt; [*][+] Hooked checkTrustedRecursive
[*][+] Hooked SSLContextInit
[*][+] Found libliger at: 0x76a3404000
[*][+] Hooked function: _ZN8proxygen15SSLVerification17verifyWithMetricsEbP17x509_store_ctx_stRKNSt6__ndk112basic_stringIcNS3_11char_traitsIcEENS3_9allocatorIcEEEEPNS0_31SSLFailureVerificationCallbacksEPNS0_31SSLSuccessVerificationCallbacksERKNS_15TimeUtilGenericINS3_6chrono12steady_clockEEERNS_10TraceEventE</code></pre></div><code>-U</code>ä»£è¡¨ç›®æ¨™æ˜¯USBé€£æ¥çš„Device
<code>-l</code>ä»£è¡¨è¦é‹è¡Œçš„Script
<code>-f</code>ä»£è¡¨è…³æœ¬çš„ç›®æ¨™ç‚ºä½•</li><li>æŸ¥çœ‹Burp Suite
æ­¤æ™‚å¦‚æœBurp Suiteæœ‰é–‹Interceptï¼Œä¸¦ä¸”Appæœ‰é€å‡ºä¸€äº›æ±è¥¿ï¼Œç†è«–ä¸Šéƒ½æœƒè¢«æ””æˆªåˆ°</li></ol><h2 id=å°æ¯”>å°æ¯”</h2><h3 id=æ²’æœ‰ä½¿ç”¨fridaçš„æ™‚å€™>æ²’æœ‰ä½¿ç”¨Fridaçš„æ™‚å€™</h3><p>æœƒå¾—åˆ°ä»¥ä¸‹æˆªåœ–
![Screenshot_20240523-101015](<a href=https://hackmd.io/_uploads/Bk7aFN37R.png#pic_center rel=external target=_blank>https://hackmd.io/_uploads/Bk7aFN37R.png#pic_center</a> =200x)
ä¸¦ä¸”Burp Suiteæ²’æœ‰å¾—åˆ°ä»»ä½•é—œæ–¼instagramçš„å°åŒ…</p><h3 id=æœ‰ä½¿ç”¨fridaçš„æ™‚å€™>æœ‰ä½¿ç”¨Fridaçš„æ™‚å€™</h3><p>ä¾‹å¦‚æˆ‘åœ¨å‰é¢çš„ç™»å…¥ä»‹é¢è¼¸å…¥ä¸€äº›æ±è¥¿ï¼Œå¯ä»¥åœ¨å°åŒ…ç´€éŒ„ä¸­æ‰¾åˆ°æˆ‘è¼¸å…¥çš„Usernameå’ŒPassword
![Screenshot_20240523-120440](<a href=https://hackmd.io/_uploads/H1-tlBhXR.png rel=external target=_blank>https://hackmd.io/_uploads/H1-tlBhXR.png</a> =200x)
å¯ä»¥åœ¨å‚³è¼¸çš„å°åŒ…ä¸­æ‰¾åˆ°é€™å€‹json parameter bodyï¼Œè€Œæˆ‘è¼¸å…¥çš„Username: testqqqqqqwwwwwwä¹Ÿçš„ç¢ºåœ¨å…¶ä¸­
<a href=#R-image-db0b9dd41fedbc9e52c005b2b243767f class=lightbox-link><img alt=åœ–ç‰‡ class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/SygolHnm0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-db0b9dd41fedbc9e52c005b2b243767f><img alt=åœ–ç‰‡ class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/SygolHnm0.png></a></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-jsonld data-lang=jsonld>{
  &#34;client_input_params&#34;: {
    &#34;device_id&#34;: &#34;android-70ea1739c3d78fb5&#34;,
    &#34;login_attempt_count&#34;: 1,
    &#34;secure_family_device_id&#34;: &#34;&#34;,
    &#34;machine_id&#34;: &#34;Zk6_IgABAAFG881bw25QVFTkQhJH&#34;,
    &#34;accounts_list&#34;: [],
    &#34;auth_secure_device_id&#34;: &#34;&#34;,
    &#34;has_whatsapp_installed&#34;: 0,
    &#34;password&#34;: &#34;#PWD_INSTAGRAM:1:1716436802:ASkUVtbquYjqR+MxW5sAAQJv9IFYeA7RM5r8OEvSkEDf6+0YsJ0oKKAkfx7o9AM5hpZW1TQV6POf1fg8uLC1E+gCgyqCwZiyCHYgqO3XDol2g2HFrwpNMwMn1S15LGjT9i8TEfh+k8hPuNFwGkEpLll6ycMur34gdx2V0vewuHlDOZapFmVetj+odQVW0u4WLwJybvKcFMdGGYWH7BqhmSsMjCFOBPzeflgf5fHQdxV14NWekpCWHED3LVwdISxa/yHvaYoc1EICz/O3wJO56aU3Y2zNQttBxKxuhCeS59sexNwaiz10hFMe9mb/0BD158z5Nn9x+3b5XDy24v3mNNHA4F6jkdiGwy8pAI0a/4X+yiOt5bVOCsinfGbso22kC6YnYq8dbBlUHD5zKTlKow8E&#34;,
    &#34;sso_token_map_json_string&#34;: &#34;&#34;,
    &#34;family_device_id&#34;: &#34;23045e76-6a5c-4886-8eca-0936fdb5f76b&#34;,
    &#34;fb_ig_device_id&#34;: [],
    &#34;device_emails&#34;: [],
    &#34;try_num&#34;: 1,
    &#34;lois_settings&#34;: {
      &#34;lois_token&#34;: &#34;&#34;,
      &#34;lara_override&#34;: &#34;&#34;
    },
    &#34;event_flow&#34;: &#34;login_manual&#34;,
    &#34;event_step&#34;: &#34;home_page&#34;,
    &#34;headers_infra_flow_id&#34;: &#34;&#34;,
    &#34;openid_tokens&#34;: {},
    &#34;client_known_key_hash&#34;: &#34;&#34;,
    &#34;contact_point&#34;: &#34;testqqqqqqwwwwww&#34;,
    &#34;encrypted_msisdn&#34;: &#34;&#34;
  },
  &#34;server_params&#34;: {
    &#34;should_trigger_override_login_2fa_action&#34;: 0,
    &#34;is_from_logged_out&#34;: 0,
    &#34;should_trigger_override_login_success_action&#34;: 0,
    &#34;login_credential_type&#34;: &#34;none&#34;,
    &#34;server_login_source&#34;: &#34;login&#34;,
    &#34;waterfall_id&#34;: null,
    &#34;login_source&#34;: &#34;Login&#34;,
    &#34;is_platform_login&#34;: 0,
    &#34;INTERNAL__latency_qpl_marker_id&#34;: 36707139,
    &#34;offline_experiment_group&#34;: null,
    &#34;is_from_landing_page&#34;: 0,
    &#34;password_text_input_id&#34;: &#34;0:96&#34;,
    &#34;ar_event_source&#34;: &#34;login_home_page&#34;,
    &#34;username_text_input_id&#34;: &#34;0:95&#34;,
    &#34;layered_homepage_experiment_group&#34;: null,
    &#34;should_show_nested_nta_from_aymh&#34;: 1,
    &#34;device_id&#34;: null,
    &#34;INTERNAL__latency_qpl_instance_id&#34;: 217,
    &#34;reg_flow_source&#34;: &#34;cacheable_aymh_screen&#34;,
    &#34;is_caa_perf_enabled&#34;: 1,
    &#34;credential_type&#34;: &#34;password&#34;,
    &#34;caller&#34;: &#34;gslr&#34;,
    &#34;family_device_id&#34;: null,
    &#34;INTERNAL_INFRA_THEME&#34;: &#34;harm_f&#34;,
    &#34;is_from_logged_in_switcher&#34;: 0
  }
}</code></pre></div><h1 id=how-to-use-mitmproxy-as-proxy>How to use mitmproxy as Proxy?</h1><p>é€™æœ‰é»å°è¤‡é›œï¼Œæˆ‘çœ‹ç¶²è·¯ä¸Šçš„æ•™å­¸æœ‰æ™‚å€™éƒ½æ±æ¼è¥¿æ¼ï¼Œ</p><ol><li>å®‰è£mitmrproxy
æˆ‘æ˜¯ç›´æ¥ç”¨<code>$ pip install mitmproxy</code>ï¼Œä¸¦ä¸”ç›´æ¥runèµ·ä¾†ï¼Œ<code>$ mitmweb</code></li><li>ä¸‹è¼‰æ†‘è­‰
å¦‚æœä¸€é–‹å§‹æ‹¿åˆ°çš„æ‰‹æ©Ÿå°±æ˜¯å·²ç¶“Rootedï¼Œé‚£å°±ç›´æ¥ä¸‹è¼‰æ†‘è­‰å°±å¥½ï¼Œæˆ‘æ˜¯ç”¨é›»è…¦ç‰ˆä¸‹è¼‰ï¼Œé¦–å…ˆæŠŠé›»è…¦ä¸Šçš„proxyè¨­å®šèµ·ä¾†
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/HJ5drE4wC.png rel=external target=_blank>https://hackmd.io/_uploads/HJ5drE4wC.png</a> =300x)
ä¸¦ä¸”åœ¨ç€è¦½å™¨ä¸Šæ‰“ <a href=http://mitm.it rel=external target=_blank>http://mitm.it</a> ç„¶å¾Œå°±æœƒçœ‹åˆ°ä»¥ä¸‹ç•«é¢
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/Bk-cINNP0.png rel=external target=_blank>https://hackmd.io/_uploads/Bk-cINNP0.png</a> =300x)
å¦‚æœæ²’æœ‰å…ˆè¨­å®šé›»è…¦ä¸Šçš„proxyï¼Œä»–é è¨­ä¸¦ä¸æœƒèµ°mitmproxyï¼Œé€™æ™‚å€™å†ç€è¦½åŒä¸€å€‹ç¶²ç«™å°±æœƒå‡ºç¾ä»¥ä¸‹ç•«é¢
<a href=#R-image-614af3642238bf09b562e8967ce7cfdf class=lightbox-link><img alt=åœ–ç‰‡ class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/H1dmI4NPC.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-614af3642238bf09b562e8967ce7cfdf><img alt=åœ–ç‰‡ class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/H1dmI4NPC.png></a>
é€™æ™‚æˆ‘å€‘å€‘å°±å¯ä»¥ç›´æ¥é¸å–androidè¦å¾—æ†‘è­‰</li><li>æŠŠæ†‘è­‰æ”¾åˆ°æ‰‹æ©Ÿä¸Šä¸¦ä¸”ä¾ç…§<a href=https://hackmd.io/@SBK6401/r1pDCcqCT#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85 rel=external target=_blank>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a>ä¸­æœ€å¾Œçš„æ³¨æ„äº‹é …é€²è¡Œå®‰è£ï¼Œä¹Ÿå°±æ˜¯å…ˆæŠŠä¹‹å‰æ‰€æœ‰å®‰è£çš„æ†‘è­‰åˆªé™¤â†’é‡æ–°å•Ÿå‹•â†’é‡æ–°å®‰è£"æ‰€æœ‰"çš„æ†‘è­‰â†’é‡æ–°å®‰è£Magiskæ¨¡çµ„â†’Rebootï¼Œå°±å¯ä»¥äº†
æ­¤æ™‚æª¢æŸ¥æ‰‹æ©Ÿä¸­çš„çš„Trusted credentialsæ‡‰è©²å°±æœƒç™¼ç¾mitmproxyçš„æ†‘è­‰å·²ç¶“è¢«ä¿¡ä»»
![Screenshot_20240704-225258](<a href=https://hackmd.io/_uploads/B1v_PE4vC.png rel=external target=_blank>https://hackmd.io/_uploads/B1v_PE4vC.png</a> =200x)</li><li>è¨­å®šæ‰‹æ©Ÿçš„Proxy IP
æˆ‘æ˜¯ç›´æ¥ç”¨é›»è…¦çš„hot spotä¾†æ¸¬è©¦ï¼Œæ‰€ä»¥æ‰‹æ©Ÿå°±å¡«é›»è…¦IPå’Œ8080çš„Port</li><li>æ””æˆªæµé‡
æ­¤æ™‚ä¸€åˆ‡å¹¾ä¹æº–å‚™å°±ç·’ï¼Œä½†æœ‰å€‹å°å•é¡Œï¼Œå¦‚æœæŒ‰ç…§å‰é¢çš„commandï¼Œæœƒä¸€ç›´å‡ºç¾ä»¥ä¸‹å•é¡Œ
![åœ–ç‰‡](<a href=https://hackmd.io/_uploads/r1Huu44PA.png rel=external target=_blank>https://hackmd.io/_uploads/r1Huu44PA.png</a> =400x)
æ ¹æ“š<a href=https://stackoverflow.com/questions/52068746/mitmproxy-client-connection-killed-by-block-global rel=external target=_blank>Stackoverflow</a>çš„èªªæ˜ï¼Œæˆ‘å€‘å¯ä»¥åŠ ä¸Šsetåƒæ•¸<div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mitmweb --set block_global<span style=color:#f92672>=</span>false --set view</span></span></code></pre></div>å°±å¯ä»¥é †åˆ©æ””æˆªåˆ°æµé‡äº†
<a href=#R-image-7d4f281310c95be6755a051e725a49d8 class=lightbox-link><img alt=åœ–ç‰‡ class="lazy lightbox figure-image" loading=lazy src=https://hackmd.io/_uploads/SkYGtVEwA.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7d4f281310c95be6755a051e725a49d8><img alt=åœ–ç‰‡ class="lazy lightbox lightbox-image" loading=lazy src=https://hackmd.io/_uploads/SkYGtVEwA.png></a></li></ol><h1 id=reference>Reference</h1><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.tpisoftware.com/tpu/articleDetails/2161 rel=external target=_blank>ç¶²é å®‰å…¨æ€§æ¸¬è©¦ï¼šOWASP ZAPä½¿ç”¨å…¥é–€</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo class=R-default href=/index.html><div class=logo-title>SBK Hugo Site</div></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li data-nav-id=/index.html><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/books-notes/index.html><a class=padding href=/books-notes/index.html>Books Notes</a><ul id=R-subsections-0771445a148f63eb6cc1a9b7ad45a36a class=collapsible-menu></ul></li><li data-nav-id=/data-structure/index.html><a class=padding href=/data-structure/index.html>Data Structures</a><ul id=R-subsections-58892abc7cea06bf1839098c82b3eb4d class=collapsible-menu></ul></li><li data-nav-id=/job/index.html><a class=padding href=/job/index.html>Jobs</a><ul id=R-subsections-0fce2c1f4d6d23f49b605855a82f55aa class=collapsible-menu></ul></li><li data-nav-id=/knowledge/index.html><a class=padding href=/knowledge/index.html>Knowledges</a><ul id=R-subsections-0bdb754d722e03f187f2117c1ef8015d class=collapsible-menu></ul></li><li data-nav-id=/leetcode/index.html><a class=padding href=/leetcode/index.html>LeetCodes</a><ul id=R-subsections-76e85062179d09303530c47eb73fc667 class=collapsible-menu></ul></li><li class=parent data-nav-id=/problem-solutions/index.html><a class=padding href=/problem-solutions/index.html>Problem Solutions</a><ul id=R-subsections-4f9e0f3095337026c1723515d5409f89 class=collapsible-menu><li data-nav-id=/problem-solutions/_wp-admin-vs-_wp-content-vs-_wp-include-vs-_wp-json/index.html><a class=padding href=/problem-solutions/_wp-admin-vs-_wp-content-vs-_wp-include-vs-_wp-json/index.html>/wp-admin VS /wp-content VS /wp-include VS /wp-json</a></li><li data-nav-id=/problem-solutions/sudo-chmod-777--r-_usr-problem/index.html><a class=padding href=/problem-solutions/sudo-chmod-777--r-_usr-problem/index.html>`sudo chmod 777 -R /usr` Problem</a></li><li data-nav-id=/problem-solutions/~_.zshrc--initial-library/index.html><a class=padding href=/problem-solutions/~_.zshrc--initial-library/index.html>~/.zshrc & Initial Library</a></li><li data-nav-id=/problem-solutions/createprocessentrycommon_586_-create-process-not-expected-to-return/index.html><a class=padding href=/problem-solutions/createprocessentrycommon_586_-create-process-not-expected-to-return/index.html>CreateProcessEntryCommon:586: Create process not expected to return</a></li><li data-nav-id=/problem-solutions/endnote---invalid-citation/index.html><a class=padding href=/problem-solutions/endnote---invalid-citation/index.html>Endnote - Invalid Citation</a></li><li data-nav-id=/problem-solutions/fatal_-authentication-failed-for-https___github.com_username_repository.git_/index.html><a class=padding href=/problem-solutions/fatal_-authentication-failed-for-https___github.com_username_repository.git_/index.html>fatal: Authentication failed for `'https://github.com/{username}/{repository}.git/'`</a></li><li data-nav-id=/problem-solutions/git-large-file-error---solution/index.html><a class=padding href=/problem-solutions/git-large-file-error---solution/index.html>Git Large File Error - Solution</a></li><li data-nav-id=/problem-solutions/how-how-to-use-mailgun_resend-as-smtp-server_/index.html><a class=padding href=/problem-solutions/how-how-to-use-mailgun_resend-as-smtp-server_/index.html>How How to use Mailgun/Resend as SMTP server?</a></li><li data-nav-id=/problem-solutions/how-to-address-docker-compose-not-found_/index.html><a class=padding href=/problem-solutions/how-to-address-docker-compose-not-found_/index.html>How to address docker compose not found?</a></li><li data-nav-id=/problem-solutions/how-to-adjust-endnotes-paragraph-in-word_/index.html><a class=padding href=/problem-solutions/how-to-adjust-endnotes-paragraph-in-word_/index.html>How to adjust Endnote's Paragraph in Word?</a></li><li data-nav-id=/problem-solutions/how-to-build-apk-file-on-react-native-project_/index.html><a class=padding href=/problem-solutions/how-to-build-apk-file-on-react-native-project_/index.html>How to build apk file on React-Native Project?</a></li><li data-nav-id=/problem-solutions/how-to-check-if-the-paper-is-top-conference-or-q1-journal_/index.html><a class=padding href=/problem-solutions/how-to-check-if-the-paper-is-top-conference-or-q1-journal_/index.html>How to check if the paper is Top Conference or Q1 Journal?</a></li><li data-nav-id=/problem-solutions/how-to-download-blob-videos_/index.html><a class=padding href=/problem-solutions/how-to-download-blob-videos_/index.html>How to download blob videos?</a></li><li data-nav-id=/problem-solutions/how-to-install-aab-file_/index.html><a class=padding href=/problem-solutions/how-to-install-aab-file_/index.html>How to install aab file?</a></li><li data-nav-id=/problem-solutions/how-to-install-logontracer_/index.html><a class=padding href=/problem-solutions/how-to-install-logontracer_/index.html>How to install LogonTracer?</a></li><li data-nav-id=/problem-solutions/how-to-root-android-phone--install-alwaystrustusercert.zip-module_/index.html><a class=padding href=/problem-solutions/how-to-root-android-phone--install-alwaystrustusercert.zip-module_/index.html>How to Root Android Phone & Install AlwaysTrustUserCert.zip Module?</a></li><li data-nav-id=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html><a class=padding href=/problem-solutions/how-to-use-vscode-_-web-storm-debug-js_/index.html>How to use VScode / Web Storm Debug JS?</a></li><li class=active data-nav-id=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html><a class=padding href=/problem-solutions/how-to-use-zap_burp-suite_mitmproxy-as-proxy-for-android_/index.html>How to use ZAP/Burp Suite/mitmproxy as Proxy for Android?</a></li><li data-nav-id=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html><a class=padding href=/problem-solutions/mitmproxy%E7%9B%B8%E9%97%9C%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html>MITMProxyç›¸é—œå•é¡Œæ•´ç†</a></li><li data-nav-id=/problem-solutions/problems-about-multiprocess/index.html><a class=padding href=/problem-solutions/problems-about-multiprocess/index.html>Problems About Multiprocess</a></li><li data-nav-id=/problem-solutions/pwndbg-installation-problems/index.html><a class=padding href=/problem-solutions/pwndbg-installation-problems/index.html>pwndbg installation problems</a></li><li data-nav-id=/problem-solutions/react-native---error-resolving-plugin-id_-com.facebook.react.settings/index.html><a class=padding href=/problem-solutions/react-native---error-resolving-plugin-id_-com.facebook.react.settings/index.html>React Native - Error resolving plugin [id: 'com.facebook.react.settings']</a></li><li data-nav-id=/problem-solutions/uiautomatorviewer-%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html><a class=padding href=/problem-solutions/uiautomatorviewer-%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/index.html>UiAutomatorViewer å¸¸è¦‹å•é¡Œæ•´ç†</a></li><li data-nav-id=/problem-solutions/unexpected-fatal-error-while-initializing-python-runtime_/index.html><a class=padding href=/problem-solutions/unexpected-fatal-error-while-initializing-python-runtime_/index.html>Unexpected fatal error while initializing python runtime.</a></li><li data-nav-id=/problem-solutions/virtualbox%E6%BB%91%E9%BC%A0%E7%84%A1%E6%B3%95%E8%B7%B3%E5%87%BA/index.html><a class=padding href=/problem-solutions/virtualbox%E6%BB%91%E9%BC%A0%E7%84%A1%E6%B3%95%E8%B7%B3%E5%87%BA/index.html>VirtualBoxæ»‘é¼ ç„¡æ³•è·³å‡º</a></li><li data-nav-id=/problem-solutions/wsl-tty-_dev_tty0/index.html><a class=padding href=/problem-solutions/wsl-tty-_dev_tty0/index.html>WSL tty /dev/tty0</a></li><li data-nav-id=/problem-solutions/wsl2-cannot-list-android-devices/index.html><a class=padding href=/problem-solutions/wsl2-cannot-list-android-devices/index.html>WSL2 Cannot List Android Devices</a></li><li data-nav-id=/problem-solutions/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hugo+github%E6%9E%B6%E8%A8%AD%E7%B6%B2%E7%AB%99/index.html><a class=padding href=/problem-solutions/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hugo+github%E6%9E%B6%E8%A8%AD%E7%B6%B2%E7%AB%99/index.html>å¦‚ä½•ä½¿ç”¨Hugo+Githubæ¶è¨­ç¶²ç«™</a></li></ul></li><li data-nav-id=/security/index.html><a class=padding href=/security/index.html>Securities</a><ul id=R-subsections-66815ecaaecfc1c209e5637d03b258b2 class=collapsible-menu></ul></li><li data-nav-id=/side-project/index.html><a class=padding href=/side-project/index.html>Side Projects</a><ul id=R-subsections-3295de6e89859c4cf23a4292e734c881 class=collapsible-menu></ul></li><li data-nav-id=/survey-papers/index.html><a class=padding href=/survey-papers/index.html>Survey Papers</a><ul id=R-subsections-baa5a308e222e800d6e93248dad73a11 class=collapsible-menu></ul></li><li data-nav-id=/terminology/index.html><a class=padding href=/terminology/index.html>Terminologies</a><ul id=R-subsections-a19bf87a9a9aaf0a4146b803a35492f8 class=collapsible-menu></ul></li><li data-nav-id=/toc/index.html><a class=padding href=/toc/index.html>TOCs</a><ul id=R-subsections-451d3779340ac1afa8683c0232808cbf class=collapsible-menu></ul></li><li data-nav-id=/tools/index.html><a class=padding href=/tools/index.html>Tools</a><ul id=R-subsections-bf1399820dde3dd110e03ace4147ff86 class=collapsible-menu></ul></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1743619851 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1743619851 defer></script><script src=/js/theme.min.js?1743619851 defer></script></body></html>